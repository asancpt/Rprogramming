[
["index.html", "R Programming: Lecture Notes Preface Teaching Assistant FAQ Syllabus", " R Programming: Lecture Notes Kyun-Seop Bae, Sungpil Han 2017-12-20 Preface 안녕하십니까? 2017년 1학기 울산대학교 의학과 대학원 수업 R Programming 과목 담당교수 배균섭입니다. R은 http://cran.r-project.org 에서 다운로드받아 설치할 수 있습니다. 역시 같은 사이트에서 Manual이 나와 있으니 참고하시기 바랍니다. 구글에서 ‘R Programming pdf’와 같은 키워드로 검색하시면 많은 자료를 보실 수 있습니다. 첨부한 R.stx 파일은 AcroEdit이라는 editor에서 사용할 syntax highlighting용 구문 파일입니다. http://www.acrosoft.pe.kr 에서 다운로드 받아 설치하시기 바랍니다. AcroEdit대신 notepad++를 선호하시는 분은 그대로 사용하셔도 됩니다. 저는 RStudio, tinnR 등을 이용해서 강의하지 않습니다만, 필요하신 분은 쓰셔도 괜찮습니다. 향후 R package 작성을 위해서는 MiKTeX와 Rtools를 설치하십시오. 추가로 말씀드리자면, http://www.coursera.org 에 많은 R 강좌가 개설되어 있습니다. Specialization course로 들어가면 유로이지만, (Specialization course는 여러 개의 과목이 합쳐져 있는 것입니다.) 개별 과목을 검색해서 들어가면, 무료로도 볼 수 있습니다. (대신 시험을 칠 수 없거나, certificate를 받을 수 없습니다.) 좋은 강좌가 많으니 많이 활용하시기 바립니다. 강의 장소에 불편함이 많은 것으로 생각되어, 다음과 같이 Skype 모임을 개설하였습니다. 사정상 원거리에서 오시기 불편한 분들은 활용하시기 바랍니다. 출석은 화면을 캡쳐하거나 휴대폰으로 찍은 뒤 sec@acp.kr, shan@acp.kr 로 보내주시면 출석으로 인정해 드립니다. Skype 모임 참가 https://meet.lync.com/uucp-acp/ksbae/SKGJ3BNQ 2017년 3월, 배균섭 배상 The online version of this book is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. Creative Commons License Teaching Assistant 안녕하십니까? 서울아산병원 임상약리학과 전공의 한성필입니다. 수업과 관련된 여러 제반 업무를 담당하고 있습니다. 언제든 의문사항 있으면 r@acr.kr 로 전체 메일 보내시거나 교수님 k@acr.kr 혹은 제 개인 메일 shan@acp.kr 로 연락해 주십시오. 교수님께서 세우신 방침에 따라 수업시간에 출석을 부르지 않을 예정입니다. 수강하시는 화면(Skype)을 휴대폰으로 사진 찍으시거나 강의실의 스크린을 사진으로 촬영하셔서 sec@acp.kr / shan@acp.kr 로 동시에 보내주시면 됩니다. 가급적 “2017-03-31 한성필 출석” 과 같은 식의 제목을 유지해 주시면 처리하는데 큰 도움이 될 것 같습니다. 출석 체크를 위해 전체메일을 사용하지 말아주십시오! 아울러 수업 중에 사용한 코드/스크립트를 사용하여 R의 패키지인 bookdown을 사용해 웹북을 제작 중에 있습니다. (Xie 2017a) 여러분이 읽고 있는 이 책 자체가 R 코드의 일종인 Rmarkdown의 결과물이라고 보시면 됩니다. Github 저장소가 있으니 소스 코드를 보실 수 있습니다. 누구나 소스를 편집하여 Pull Request를 요청할 수 있으므로 혹시 Github를 사용하셔서 웹북의 질을 높이고자 하시는 수강생 선생님들께서는 도움을 주십시오. 감사합니다. 2017년 3월, 한성필 올림 FAQ 접속 관련 Q. 스카이프를 한번도 안써봐서 이참에 사용법을 배우고있는데, 수업시작시에 상대방을 어떻게 검색해서 들어가면 될지 알려주시면 감사하겠습니다. Q. 온라인 수강시 접속하는 스카이프 주소는 무엇인지요? https://meet.lync.com/uucp-acp/ksbae/SKGJ3BNQ Chrome 등 웹브라우저에서 위 주소를 입력하면 직접 대화방으로 연결됩니다. (검색할 필요 없습니다.) 처음 설치시에는 Add-on이 설치될 수 있습니다. MacOS Sierra, Win7, Win10에서 Chrome, Internet Explorer 등을 사용하여 테스트해 보았고 모두 잘 동작하였습니다. 대부분의 경우 Skype For Business 계정이 없을 것으로 생각되는데 따로 로그인할 필요 없습니다. 수업 시작 30분 전부터 대화방을 개설해 놓도록 하겠습니다. https://groups.google.com/a/acr.kr/d/msg/r/nUkrE37W2kQ/waG-FkM_BgAJ 교수님께서 처음 보낸 메일을 참고해 주십시오. Q. 앞으로 수업은 지난 첫수업처럼 계속 온라인 수강이 가능한 것인가요? 네, 계속 온라인으로 가능합니다. Q. 저도 웹캠을 설치하여야 하여야 하나요? 설치할 필요 없습니다. 오히려 수강자의 웹캠의 전원을 꺼두시길 권고드립니다. Q. 수강전 온라인 강의 테스트 해볼 수 있나요? 수업 시작 30분 전부터 대화방을 개설하여 놓도록 하겠습니다. 출석관련 Q. 미국학회 참석으로 수업시간이 귀국행 비행기 기내에 있을거같아 출석이 안될것 같습니다. 방법이 있을지요? 결석 사유서를 제출해 주시면 출석 처리 하겠습니다. 대학원 홈페이지 참고 바랍니다. 이 링크로 들어가시면 가장 위에 있습니다. (결석사유서.hwp) 참고로 수업 영상은 녹화하여 Youtube에 비공개 링크를 만들 예정이라서 추후에 관련 영상을 시청할 수 있을 것 같습니다. 결석사유서를 제출한다고 100% 출석이 인정되는 것은 아닙니다. 이것이 기본적으로는 offline강의이기 때문에 강의시간에 강의실에 있든지, 또는 온라인으로 접속해 있어야 합니다. 출석사유서를 제출하거나, 추후 동영상 시청을 해서 그 증거(사진)을 제출하는 경우에 감점을 줄여드릴 수 있습니다. 예를 들어, 결석시에는 2점 감점인데, 결석사유서를 제출하면 1점만 감점한다는지, 동영상을 보면 0.5점만 감점한다는지 하는 것입니다. 결석 사유서 제출 시 출석 처리 원칙에 대한 설명을 드리오니, 참고하시길 바랍니다. 과제 관련 Q. 과제물이 있다고 들었는데 언제 assign하게 되는지요? 과제물은 빨라야 5주차 이후에 나갑니다. 수업계획서가 변경되었다고하셨는데, 과정을보니 시험을 몇째주에 보는지 기재되어있지 않아서요, 성적평가에는 중간고사,기말고사,과제가 모두 적혀있는데 어떤것이 맞는 것 일까요? 중간 기말 고사는 따로 없습니다. 대신 강의를 합니다. (수업계획서 참고) Coursera 관련 Q. 첫 수업 때, certification 관련 말씀을 하셨는데, 정확히 coursera 사이트에서 어떤 것을 듣고, 제출을 해야하는지 궁금합니다. (비슷한 내용이 많아, 어떤것을 들어야하는지 헷갈립니다.) Coursera는 꼭 어느 것을 들어야 하는 것은 아니고, R programming과 관련된 것이라면 자유로이 골라서 들으면 됩니다. 대표적인 두 가지만 들자면 다음과 같습니다. https://www.coursera.org/learn/r-programming https://www.coursera.org/learn/r-programming-environment Q. Coursera 강의를 듣고 증명서를 내면 출석을 얼마나 커버할 수 있을런지요? Coursera는 출석 커버보다는 grade를 올려 주기 위한 것입니다. 출석은 Skype로 커버해야 합니다. 출석의 성적 반영비율은 25%이지만, 규정상 4회 이상 결석이면 성적이 나갈 수 없습니다. Syllabus 2017-04-10 현재 개정된 수업계획서입니다. Syllabus page 1 Syllabus page 1 References "],
["r-language.html", "Chapter 1 R language", " Chapter 1 R language 2017-03-15 배균섭 교수님 강의 R Language Definition의 초반 내용에 대해 설명하였습니다. "],
["graphics.html", "Chapter 2 Graphics 2.1 Introduction 2.2 상위수준 그림 함수 2.3 하위수준 그림 함수 2.4 그림 출력하기", " Chapter 2 Graphics 2017-03-22 임형석 교수님 강의 R을 사용해 그림 그리는 방법에 대해 알아보겠습니다. 2.1 Introduction R에서 상위수준 그림 함수는 그림을 생성합니다. 반면 하위수준 그림 함수는 기존의 그림에 그림을 추가합니다. 2.2 상위수준 그림 함수 2.2.1 상위수준 그림 함수의 주요 인자 (arguments) main : 제목 xlab/ylab : x축 및 y축 레이블 xlim/ylim : x축 및 y축 범위 col : 색깔 lty : 선 모양 pch : 점 모양 cex : 그림 성분의 크기 lwd : 선 굵기 type : 그림 타입 dta &lt;- read.csv(&quot;PK.csv&quot;) head(dta) ## ID TIME AMT DV MDV ## 1 1 0.00 0 0.00 0 ## 2 1 0.00 4 0.00 1 ## 3 1 0.33 0 9.40 0 ## 4 1 0.66 0 13.71 0 ## 5 1 1.00 0 16.52 0 ## 6 1 1.50 0 29.36 0 str(dta) ## &#39;data.frame&#39;: 456 obs. of 5 variables: ## $ ID : num 1 1 1 1 1 1 1 1 1 1 ... ## $ TIME: num 0 0 0.33 0.66 1 1.5 2 3 4 6 ... ## $ AMT : num 0 4 0 0 0 0 0 0 0 0 ... ## $ DV : num 0 0 9.4 13.7 16.5 ... ## $ MDV : num 0 1 0 0 0 0 0 0 0 0 ... 2.2.2 scatter plot plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0]) plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], log=&quot;y&quot;) ## Warning in xy.coords(x, y, xlabel, ylabel, log): 86 y ## values &lt;= 0 omitted from logarithmic plot plot(dta$TIME[dta$MDV==0], log(dta$DV[dta$MDV==0])) plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0] , xlab=&quot;Time (hr)&quot;, ylab=&quot;Concentration (ng/mL)&quot; , type=&quot;o&quot;, pch=2, col=1, main=&quot;PK time-course of Drug X&quot; , xlim =c(-2,218), ylim=c(0,80)) plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], axes=F, , xlab=&quot;Time (hr)&quot;, ylab=&quot;Concentration (ng/mL)&quot; , type=&quot;o&quot;, pch=2, col=1, main=&quot;PK time-course of Drug X&quot; , xlim =c(-2,218), ylim=c(0,80)) axis(1, at=seq(0, 218, 24)) axis(2) box() 2.2.3 Histogram d.demog &lt;- read.csv(&quot;DEMOG.csv&quot;) hist(d.demog$HT) hist(d.demog$HT, breaks=10) hist(d.demog$HT, nclass=10) 2.2.3.1 with density line hist (d.demog$HT, probability=TRUE, breaks=10) lines(density(d.demog$HT)) hist (d.demog$HT, probability=TRUE, breaks=9, xaxt=&quot;n&quot; , main=&quot;Histogram for Height&quot;, xlab=&quot;Height (cm)&quot;, ylab=&quot;Probability (%)&quot;) axis(1, at=seq(min(d.demog$HT), max(d.demog$HT), 3)) lines(density(d.demog$HT)) hist (d.demog$HT, probability=TRUE, breaks=9, xaxt=&quot;n&quot; , main=&quot;Histogram for Height&quot;, xlab=&quot;Height (cm)&quot;, ylab=&quot;Probability (%)&quot; , col = &quot;lightblue&quot;, border = &quot;pink&quot;) axis(1, at=seq(min(d.demog$HT), max(d.demog$HT), 3)) lines(density(d.demog$HT)) 2.2.4 Box-Whisker Plot boxplot(d.demog$WT) boxplot(d.demog$WT ~ d.demog$SEX) boxplot(split(d.demog$WT, d.demog$SEX)) boxplot(WT ~ SEX, data=d.demog) boxplot(d.demog$WT ~ d.demog$SEX , names=c(&quot;Male&quot;,&quot;Female&quot;), ylab=&quot;AGE, year&quot;, ylim=c(min(d.demog$WT)-2, max(d.demog$WT)+2) , col=&quot;pink&quot;) boxplot(d.demog$WT ~ d.demog$SEX , names=c(&quot;Male&quot;,&quot;Female&quot;), ylab=&quot;AGE, year&quot;, ylim=c(min(d.demog$WT)-2, max(d.demog$WT)+2) , col=c(&quot;lightblue&quot;, &quot;salmon&quot;), width=c(0.6, 1)) -varwidth: if varwidth is TRUE, the boxes are drawn with widths proportional to the square-roots of the number of observations in the groups. boxplot(d.demog$WT ~ d.demog$SEX , names=c(&quot;Male&quot;,&quot;Female&quot;), ylab=&quot;AGE, year&quot;, ylim=c(min(d.demog$WT)-2, max(d.demog$WT)+2) , col=c(&quot;lightblue&quot;, &quot;salmon&quot;) , varwidth=TRUE) 2.2.5 Bar Plot barplot(d.demog$HT) VADeaths ## Rural Male Rural Female Urban Male Urban Female ## 50-54 11.7 8.7 15.4 8.4 ## 55-59 18.1 11.7 24.3 13.6 ## 60-64 26.9 20.3 37.0 19.3 ## 65-69 41.0 30.9 54.6 35.1 ## 70-74 66.0 54.3 71.1 50.0 barplot(VADeaths, border = &quot;dark blue&quot;) barplot(VADeaths, col = rainbow(20)) barplot(VADeaths, col = heat.colors(8)) barplot(VADeaths, col = gray.colors(4)) barplot(VADeaths, col = gray.colors(4), log=&quot;x&quot;) barplot(VADeaths, col = gray.colors(4), log=&quot;y&quot;) barplot(VADeaths, col = gray.colors(4), log=&quot;xy&quot;) 2.2.6 pie chart drug.X.market &lt;- c(0.12, 0.29, 0.32, 0.22, 0.11, 0.28) names(drug.X.market) &lt;- c(&quot;South Korea&quot;,&quot;China&quot;,&quot;USA&quot;,&quot;Japan&quot;,&quot;Austria&quot;,&quot;EU&quot;) pie(drug.X.market) 2.2.7 matplot 함수 2.2.7.1 matrix와 column 사이의 그림 pct.95 &lt;- read.csv(&quot;pct95.csv&quot;) matplot(pct.95[,1], pct.95[,2:ncol(pct.95)], pch=1) matplot(pct.95[,1], pct.95[,2:ncol(pct.95)], pch=1, col=c(1,2,1), type=&quot;l&quot;, lty=1, lwd=c(1,2,1)) 2.2.8 Scatter plot matrices (pairs plots) pairs(d.demog) 2.2.8.1 add a loess smoother, type pairs(d.demog, panel = panel.smooth) panel.cor &lt;- function(x, y, digits=2, prefix=&quot;&quot;, cex.cor) { usr &lt;- par(&quot;usr&quot;); on.exit(par(usr)) par(usr = c(0, 1, 0, 1)) r = (cor(x, y)) txt &lt;- format(c(r, 0.123456789), digits=digits)[1] txt &lt;- paste(prefix, txt, sep=&quot;&quot;) if(missing(cex.cor)) cex &lt;- 1.5 text(0.5, 0.5, txt, cex = 1.5) } pairs(d.demog, lower.panel=panel.smooth, upper.panel=panel.cor) 2.3 하위수준 그림 함수 points : 점추가 lines : 선 추가 abline : 기준선 추가 mtext : 텍스트 추가 legend : 설명(legend) 추가 polygon : polygon 추가 2.3.1 점, 선, 설명 추가 하기 {add} plot(pct.95$TIME, pct.95$PCT50, main=&quot;PK of Drug X&quot; , type=&quot;l&quot;, xlab=&quot;Time (h)&quot;, ylab=&quot;Concentration (ng/ml)&quot; , ylim=range(0,80), lty=1, col=&quot;red&quot;, lwd=2) plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], main=&quot;PK of Drug X&quot; , type=&quot;n&quot;, xlab=&quot;Time (h)&quot;, ylab=&quot;Concentration (ng/ml)&quot; , ylim=range(0,80)) points(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], pch = 16, cex=0.8) lines(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], col=&quot;black&quot;, lwd=1) abline(40, 0, col=&quot;red&quot;, lty=2) # abline(a,b): y=a+b*x legend(&quot;topright&quot;, legend=c(&quot;Individual concentrations&quot;) , lty=1, col=&quot;black&quot;) 2.3.2 polygon 함수 plot(c(1, 10), c(1, 6), type = &quot;n&quot;) polygon(c(2,8,8,2), c(5,4,3,2), col=&quot;lightgreen&quot;) plot(c(1, 9), 1:2, type = &quot;n&quot;) polygon(1:9, c(2,1,2,1,1,2,1,2,1), col = c(&quot;red&quot;, &quot;blue&quot;), border = c(&quot;green&quot;, &quot;yellow&quot;), lwd = 3, lty = c(&quot;dashed&quot;, &quot;solid&quot;)) 2.4 그림 출력하기 2.4.1 pdf graphics devices pdf(&quot;PK_of_Drug_X.pdf&quot;) plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], main=&quot;PK of Drug X&quot; , type=&quot;n&quot;, xlab=&quot;Time (h)&quot;, ylab=&quot;Concentration (ng/ml)&quot; , ylim=range(0,80)) points(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], pch = 16, cex=0.8) lines(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], col=&quot;black&quot;, lwd=1) abline(40, 0, col=&quot;red&quot;, lty=2) #abline(a,b): y=a+b*x legend(&quot;topright&quot;, legend=c(&quot;Individual concentrations&quot;) , lty=1, col=&quot;black&quot;) dev.off() ## pdf ## 2 2.4.2 PNG graphics devices png(&quot;PK_of_Drug_X.png&quot;) plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], main=&quot;PK of Drug X&quot; , type=&quot;n&quot;, xlab=&quot;Time (h)&quot;, ylab=&quot;Concentration (ng/ml)&quot; , ylim=range(0,80)) points(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], pch = 16, cex=0.8) lines(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], col=&quot;black&quot;, lwd=1) abline(40, 0, col=&quot;red&quot;, lty=2) #abline(a,b): y=a+b*x legend(&quot;topright&quot;, legend=c(&quot;Individual concentrations&quot;) , lty=1, col=&quot;black&quot;) dev.off() ## pdf ## 2 "],
["data-import-export.html", "Chapter 3 Data Import / Export 3.1 Read.csv 3.2 Theoph 데이타 3.3 lattice 3.4 Subseting and write.csv", " Chapter 3 Data Import / Export 2017-03-29 배균섭 교수님 강의 이번 시간에는 자료를 불러오고 조작을 가한 뒤 저장하는 방법에 대해 알아보겠습니다. 3.1 Read.csv setwd 명령어를 통해서 자료가 있는 작업 공간을 설정할 수 있습니다. 설정 후에서는 dir()을 통해 파일의 이름을 확인 할 수 있습니다. read.csv를 통해서 자료를 R에서 사용할 수 있게 됩니다. setwd(&quot;D:/Rt&quot;) dir() mydata &lt;- read.csv(&quot;MyData2017.csv&quot;, as.is=TRUE) 3.2 Theoph 데이타 R에 기본적으로 들어있는 Theoph 약동학 자료에 대해 살펴보겠습니다. head(Theoph, n = 11) ## Subject Wt Dose Time conc ## 1 1 79.6 4.02 0.00 0.74 ## 2 1 79.6 4.02 0.25 2.84 ## 3 1 79.6 4.02 0.57 6.57 ## 4 1 79.6 4.02 1.12 10.50 ## 5 1 79.6 4.02 2.02 9.66 ## 6 1 79.6 4.02 3.82 8.58 ## 7 1 79.6 4.02 5.10 8.36 ## 8 1 79.6 4.02 7.03 7.47 ## 9 1 79.6 4.02 9.05 6.89 ## 10 1 79.6 4.02 12.12 5.94 ## 11 1 79.6 4.02 24.37 3.28 tail(Theoph, n = 11) ## Subject Wt Dose Time conc ## 122 12 60.5 5.3 0.00 0.00 ## 123 12 60.5 5.3 0.25 1.25 ## 124 12 60.5 5.3 0.50 3.96 ## 125 12 60.5 5.3 1.00 7.82 ## 126 12 60.5 5.3 2.00 9.72 ## 127 12 60.5 5.3 3.52 9.75 ## 128 12 60.5 5.3 5.07 8.57 ## 129 12 60.5 5.3 7.07 6.59 ## 130 12 60.5 5.3 9.03 6.11 ## 131 12 60.5 5.3 12.05 4.57 ## 132 12 60.5 5.3 24.15 1.17 R console에서 ?Theoph를 타이핑 치면 좀 더 자세한 정보를 얻을 수 있습니다. 3.3 lattice lattice 패키지를 불러온 뒤 그림을 그려보겠습니다. (Sarkar 2017) library(lattice) # trellis xyplot(conc ~ Time | Subject, data=Theoph) xyplot(conc ~ Time | Subject, data=Theoph, type=&quot;b&quot;) Theoph[,&quot;ID&quot;] = as.numeric(as.character(Theoph[,&quot;Subject&quot;])) xyplot(conc ~ Time | ID, data=Theoph, type=&quot;b&quot;) xyplot(conc ~ Time | as.factor(ID), data=Theoph, type=&quot;b&quot;) write.csv(Theoph, &quot;Theoph.csv&quot;, row.names=FALSE, quote=FALSE, na=&quot;&quot;) 3.4 Subseting and write.csv 자료를 편집하고, subset을 만들고 각각을 파일로 저장하는 방법에 대해 알아보겠습니다. IDs = sort(unique(Theoph[,&quot;ID&quot;])) ; IDs ## [1] 1 2 3 4 5 6 7 8 9 10 11 12 nID = length(IDs) ; nID ## [1] 12 demog = unique(Theoph[,c(&quot;ID&quot;,&quot;Wt&quot;)]) colnames(demog) = c(&quot;ID&quot;, &quot;BWT&quot;) write.csv(demog, &quot;1-demog.csv&quot;, row.names=FALSE, quote=FALSE, na=&quot;&quot;) DV = Theoph[,c(&quot;ID&quot;,&quot;Time&quot;, &quot;conc&quot;)] colnames(DV) = c(&quot;ID&quot;, &quot;TIME&quot;, &quot;DV&quot;) write.csv(DV, &quot;3-DV.csv&quot;, row.names=FALSE, quote=FALSE, na=&quot;&quot;) adm = cbind(IDs, rep(0, nID), rep(320, nID)) colnames(adm) = c(&quot;ID&quot;, &quot;TIME&quot;, &quot;AMT&quot;) write.csv(adm, &quot;2-adm.csv&quot;, row.names=FALSE, quote=FALSE, na=&quot;&quot;) demog = read.csv(&quot;1-demog.csv&quot;, as.is=TRUE) adm = read.csv(&quot;2-adm.csv&quot;, as.is=TRUE) dv = read.csv(&quot;3-dv.csv&quot;, as.is=TRUE) AdmDv = merge(adm, dv, by=intersect(colnames(adm), colnames(dv)), all=TRUE) AdmDv ## ID TIME AMT DV ## 1 1 0.00 320 0.74 ## 2 1 0.25 NA 2.84 ## 3 1 0.57 NA 6.57 ## 4 1 1.12 NA 10.50 ## 5 1 2.02 NA 9.66 ## 6 1 3.82 NA 8.58 ## 7 1 5.10 NA 8.36 ## 8 1 7.03 NA 7.47 ## 9 1 9.05 NA 6.89 ## 10 1 12.12 NA 5.94 ## 11 1 24.37 NA 3.28 ## 12 2 0.00 320 0.00 ## 13 2 0.27 NA 1.72 ## 14 2 0.52 NA 7.91 ## 15 2 1.00 NA 8.31 ## 16 2 1.92 NA 8.33 ## 17 2 3.50 NA 6.85 ## 18 2 5.02 NA 6.08 ## 19 2 7.03 NA 5.40 ## 20 2 9.00 NA 4.55 ## 21 2 12.00 NA 3.01 ## 22 2 24.30 NA 0.90 ## 23 3 0.00 320 0.00 ## 24 3 0.27 NA 4.40 ## 25 3 0.58 NA 6.90 ## 26 3 1.02 NA 8.20 ## 27 3 2.02 NA 7.80 ## 28 3 3.62 NA 7.50 ## 29 3 5.08 NA 6.20 ## 30 3 7.07 NA 5.30 ## 31 3 9.00 NA 4.90 ## 32 3 12.15 NA 3.70 ## 33 3 24.17 NA 1.05 ## 34 4 0.00 320 0.00 ## 35 4 0.35 NA 1.89 ## 36 4 0.60 NA 4.60 ## 37 4 1.07 NA 8.60 ## 38 4 2.13 NA 8.38 ## 39 4 3.50 NA 7.54 ## 40 4 5.02 NA 6.88 ## 41 4 7.02 NA 5.78 ## 42 4 9.02 NA 5.33 ## 43 4 11.98 NA 4.19 ## 44 4 24.65 NA 1.15 ## 45 5 0.00 320 0.00 ## 46 5 0.30 NA 2.02 ## 47 5 0.52 NA 5.63 ## 48 5 1.00 NA 11.40 ## 49 5 2.02 NA 9.33 ## 50 5 3.50 NA 8.74 ## 51 5 5.02 NA 7.56 ## 52 5 7.02 NA 7.09 ## 53 5 9.10 NA 5.90 ## 54 5 12.00 NA 4.37 ## 55 5 24.35 NA 1.57 ## 56 6 0.00 320 0.00 ## 57 6 0.27 NA 1.29 ## 58 6 0.58 NA 3.08 ## 59 6 1.15 NA 6.44 ## 60 6 2.03 NA 6.32 ## 61 6 3.57 NA 5.53 ## 62 6 5.00 NA 4.94 ## 63 6 7.00 NA 4.02 ## 64 6 9.22 NA 3.46 ## 65 6 12.10 NA 2.78 ## 66 6 23.85 NA 0.92 ## 67 7 0.00 320 0.15 ## 68 7 0.25 NA 0.85 ## 69 7 0.50 NA 2.35 ## 70 7 1.02 NA 5.02 ## 71 7 2.02 NA 6.58 ## 72 7 3.48 NA 7.09 ## 73 7 5.00 NA 6.66 ## 74 7 6.98 NA 5.25 ## 75 7 9.00 NA 4.39 ## 76 7 12.05 NA 3.53 ## 77 7 24.22 NA 1.15 ## 78 8 0.00 320 0.00 ## 79 8 0.25 NA 3.05 ## 80 8 0.52 NA 3.05 ## 81 8 0.98 NA 7.31 ## 82 8 2.02 NA 7.56 ## 83 8 3.53 NA 6.59 ## 84 8 5.05 NA 5.88 ## 85 8 7.15 NA 4.73 ## 86 8 9.07 NA 4.57 ## 87 8 12.10 NA 3.00 ## 88 8 24.12 NA 1.25 ## 89 9 0.00 320 0.00 ## 90 9 0.30 NA 7.37 ## 91 9 0.63 NA 9.03 ## 92 9 1.05 NA 7.14 ## 93 9 2.02 NA 6.33 ## 94 9 3.53 NA 5.66 ## 95 9 5.02 NA 5.67 ## 96 9 7.17 NA 4.24 ## 97 9 8.80 NA 4.11 ## 98 9 11.60 NA 3.16 ## 99 9 24.43 NA 1.12 ## 100 10 0.00 320 0.24 ## 101 10 0.37 NA 2.89 ## 102 10 0.77 NA 5.22 ## 103 10 1.02 NA 6.41 ## 104 10 2.05 NA 7.83 ## 105 10 3.55 NA 10.21 ## 106 10 5.05 NA 9.18 ## 107 10 7.08 NA 8.02 ## 108 10 9.38 NA 7.14 ## 109 10 12.10 NA 5.68 ## 110 10 23.70 NA 2.42 ## 111 11 0.00 320 0.00 ## 112 11 0.25 NA 4.86 ## 113 11 0.50 NA 7.24 ## 114 11 0.98 NA 8.00 ## 115 11 1.98 NA 6.81 ## 116 11 3.60 NA 5.87 ## 117 11 5.02 NA 5.22 ## 118 11 7.03 NA 4.45 ## 119 11 9.03 NA 3.62 ## 120 11 12.12 NA 2.69 ## 121 11 24.08 NA 0.86 ## 122 12 0.00 320 0.00 ## 123 12 0.25 NA 1.25 ## 124 12 0.50 NA 3.96 ## 125 12 1.00 NA 7.82 ## 126 12 2.00 NA 9.72 ## 127 12 3.52 NA 9.75 ## 128 12 5.07 NA 8.57 ## 129 12 7.07 NA 6.59 ## 130 12 9.03 NA 6.11 ## 131 12 12.05 NA 4.57 ## 132 12 24.15 NA 1.17 자료를 병합(merge)해 보겠습니다. DataAll = merge(demog, AdmDv, by=c(&quot;ID&quot;), all=TRUE) DataAll ## ID BWT TIME AMT DV ## 1 1 79.6 0.00 320 0.74 ## 2 1 79.6 0.25 NA 2.84 ## 3 1 79.6 0.57 NA 6.57 ## 4 1 79.6 1.12 NA 10.50 ## 5 1 79.6 2.02 NA 9.66 ## 6 1 79.6 3.82 NA 8.58 ## 7 1 79.6 5.10 NA 8.36 ## 8 1 79.6 7.03 NA 7.47 ## 9 1 79.6 9.05 NA 6.89 ## 10 1 79.6 12.12 NA 5.94 ## 11 1 79.6 24.37 NA 3.28 ## 12 2 72.4 0.00 320 0.00 ## 13 2 72.4 0.27 NA 1.72 ## 14 2 72.4 0.52 NA 7.91 ## 15 2 72.4 1.00 NA 8.31 ## 16 2 72.4 1.92 NA 8.33 ## 17 2 72.4 3.50 NA 6.85 ## 18 2 72.4 5.02 NA 6.08 ## 19 2 72.4 7.03 NA 5.40 ## 20 2 72.4 9.00 NA 4.55 ## 21 2 72.4 12.00 NA 3.01 ## 22 2 72.4 24.30 NA 0.90 ## 23 3 70.5 0.00 320 0.00 ## 24 3 70.5 0.27 NA 4.40 ## 25 3 70.5 0.58 NA 6.90 ## 26 3 70.5 1.02 NA 8.20 ## 27 3 70.5 2.02 NA 7.80 ## 28 3 70.5 3.62 NA 7.50 ## 29 3 70.5 5.08 NA 6.20 ## 30 3 70.5 7.07 NA 5.30 ## 31 3 70.5 9.00 NA 4.90 ## 32 3 70.5 12.15 NA 3.70 ## 33 3 70.5 24.17 NA 1.05 ## 34 4 72.7 0.00 320 0.00 ## 35 4 72.7 0.35 NA 1.89 ## 36 4 72.7 0.60 NA 4.60 ## 37 4 72.7 1.07 NA 8.60 ## 38 4 72.7 2.13 NA 8.38 ## 39 4 72.7 3.50 NA 7.54 ## 40 4 72.7 5.02 NA 6.88 ## 41 4 72.7 7.02 NA 5.78 ## 42 4 72.7 9.02 NA 5.33 ## 43 4 72.7 11.98 NA 4.19 ## 44 4 72.7 24.65 NA 1.15 ## 45 5 54.6 0.00 320 0.00 ## 46 5 54.6 0.30 NA 2.02 ## 47 5 54.6 0.52 NA 5.63 ## 48 5 54.6 1.00 NA 11.40 ## 49 5 54.6 2.02 NA 9.33 ## 50 5 54.6 3.50 NA 8.74 ## 51 5 54.6 5.02 NA 7.56 ## 52 5 54.6 7.02 NA 7.09 ## 53 5 54.6 9.10 NA 5.90 ## 54 5 54.6 12.00 NA 4.37 ## 55 5 54.6 24.35 NA 1.57 ## 56 6 80.0 0.00 320 0.00 ## 57 6 80.0 0.27 NA 1.29 ## 58 6 80.0 0.58 NA 3.08 ## 59 6 80.0 1.15 NA 6.44 ## 60 6 80.0 2.03 NA 6.32 ## 61 6 80.0 3.57 NA 5.53 ## 62 6 80.0 5.00 NA 4.94 ## 63 6 80.0 7.00 NA 4.02 ## 64 6 80.0 9.22 NA 3.46 ## 65 6 80.0 12.10 NA 2.78 ## 66 6 80.0 23.85 NA 0.92 ## 67 7 64.6 0.00 320 0.15 ## 68 7 64.6 0.25 NA 0.85 ## 69 7 64.6 0.50 NA 2.35 ## 70 7 64.6 1.02 NA 5.02 ## 71 7 64.6 2.02 NA 6.58 ## 72 7 64.6 3.48 NA 7.09 ## 73 7 64.6 5.00 NA 6.66 ## 74 7 64.6 6.98 NA 5.25 ## 75 7 64.6 9.00 NA 4.39 ## 76 7 64.6 12.05 NA 3.53 ## 77 7 64.6 24.22 NA 1.15 ## 78 8 70.5 0.00 320 0.00 ## 79 8 70.5 0.25 NA 3.05 ## 80 8 70.5 0.52 NA 3.05 ## 81 8 70.5 0.98 NA 7.31 ## 82 8 70.5 2.02 NA 7.56 ## 83 8 70.5 3.53 NA 6.59 ## 84 8 70.5 5.05 NA 5.88 ## 85 8 70.5 7.15 NA 4.73 ## 86 8 70.5 9.07 NA 4.57 ## 87 8 70.5 12.10 NA 3.00 ## 88 8 70.5 24.12 NA 1.25 ## 89 9 86.4 0.00 320 0.00 ## 90 9 86.4 0.30 NA 7.37 ## 91 9 86.4 0.63 NA 9.03 ## 92 9 86.4 1.05 NA 7.14 ## 93 9 86.4 2.02 NA 6.33 ## 94 9 86.4 3.53 NA 5.66 ## 95 9 86.4 5.02 NA 5.67 ## 96 9 86.4 7.17 NA 4.24 ## 97 9 86.4 8.80 NA 4.11 ## 98 9 86.4 11.60 NA 3.16 ## 99 9 86.4 24.43 NA 1.12 ## 100 10 58.2 0.00 320 0.24 ## 101 10 58.2 0.37 NA 2.89 ## 102 10 58.2 0.77 NA 5.22 ## 103 10 58.2 1.02 NA 6.41 ## 104 10 58.2 2.05 NA 7.83 ## 105 10 58.2 3.55 NA 10.21 ## 106 10 58.2 5.05 NA 9.18 ## 107 10 58.2 7.08 NA 8.02 ## 108 10 58.2 9.38 NA 7.14 ## 109 10 58.2 12.10 NA 5.68 ## 110 10 58.2 23.70 NA 2.42 ## 111 11 65.0 0.00 320 0.00 ## 112 11 65.0 0.25 NA 4.86 ## 113 11 65.0 0.50 NA 7.24 ## 114 11 65.0 0.98 NA 8.00 ## 115 11 65.0 1.98 NA 6.81 ## 116 11 65.0 3.60 NA 5.87 ## 117 11 65.0 5.02 NA 5.22 ## 118 11 65.0 7.03 NA 4.45 ## 119 11 65.0 9.03 NA 3.62 ## 120 11 65.0 12.12 NA 2.69 ## 121 11 65.0 24.08 NA 0.86 ## 122 12 60.5 0.00 320 0.00 ## 123 12 60.5 0.25 NA 1.25 ## 124 12 60.5 0.50 NA 3.96 ## 125 12 60.5 1.00 NA 7.82 ## 126 12 60.5 2.00 NA 9.72 ## 127 12 60.5 3.52 NA 9.75 ## 128 12 60.5 5.07 NA 8.57 ## 129 12 60.5 7.07 NA 6.59 ## 130 12 60.5 9.03 NA 6.11 ## 131 12 60.5 12.05 NA 4.57 ## 132 12 60.5 24.15 NA 1.17 References "],
["frequently-used-functions.html", "Chapter 4 Frequently Used Functions 4.1 Command 4.2 The basics 4.3 Common data structures 4.4 Statistics 4.5 Working with R 4.6 I/O", " Chapter 4 Frequently Used Functions 2017-04-05 배균섭 교수님 강의 자주 쓰는 함수 및 명령어에 대해 알아보겠습니다. 4.1 Command # 2017-04-05 R-intro.pdf Chapter 08 pois ## Error in eval(expr, envir, enclos): 객체 &#39;pois&#39;를 찾을 수 없습니다 # ?dbeta dnorm(0) ## [1] 0.3989 pnorm(0) ## [1] 0.5 1 - pnorm(1.96) ## [1] 0.025 # ?pnorm pnorm(1.96, lower.tail=FALSE) ## [1] 0.025 qnorm(0.5) ## [1] 0 qnorm(0.975) ## [1] 1.96 format(qnorm(0.975), digits=22) ## [1] &quot;1.9599639845400536&quot; rnorm(5) ## [1] -0.6873 -0.3959 -0.3452 -1.3598 -1.1089 rnorm(5, 10, 1) ## [1] 8.947 8.920 9.268 9.747 10.913 x = rnorm(100, 10, 1) mean(x) ## [1] 9.923 sd(x) ## [1] 1.062 2*pt(-2.43, df = 13) ## [1] 0.03033 2*pt(-2.43, df = 1000) ## [1] 0.01527 qnorm(0.995) ## [1] 2.576 qf(0.01, 2, 7, lower.tail = FALSE) ## [1] 9.547 # ?fivenum faithful ## eruptions waiting ## 1 3.600 79 ## 2 1.800 54 ## 3 3.333 74 ## 4 2.283 62 ## 5 4.533 85 ## 6 2.883 55 ## 7 4.700 88 ## 8 3.600 85 ## 9 1.950 51 ## 10 4.350 85 ## 11 1.833 54 ## 12 3.917 84 ## 13 4.200 78 ## 14 1.750 47 ## 15 4.700 83 ## 16 2.167 52 ## 17 1.750 62 ## 18 4.800 84 ## 19 1.600 52 ## 20 4.250 79 ## 21 1.800 51 ## 22 1.750 47 ## 23 3.450 78 ## 24 3.067 69 ## 25 4.533 74 ## 26 3.600 83 ## 27 1.967 55 ## 28 4.083 76 ## 29 3.850 78 ## 30 4.433 79 ## 31 4.300 73 ## 32 4.467 77 ## 33 3.367 66 ## 34 4.033 80 ## 35 3.833 74 ## 36 2.017 52 ## 37 1.867 48 ## 38 4.833 80 ## 39 1.833 59 ## 40 4.783 90 ## 41 4.350 80 ## 42 1.883 58 ## 43 4.567 84 ## 44 1.750 58 ## 45 4.533 73 ## 46 3.317 83 ## 47 3.833 64 ## 48 2.100 53 ## 49 4.633 82 ## 50 2.000 59 ## 51 4.800 75 ## 52 4.716 90 ## 53 1.833 54 ## 54 4.833 80 ## 55 1.733 54 ## 56 4.883 83 ## 57 3.717 71 ## 58 1.667 64 ## 59 4.567 77 ## 60 4.317 81 ## 61 2.233 59 ## 62 4.500 84 ## 63 1.750 48 ## 64 4.800 82 ## 65 1.817 60 ## 66 4.400 92 ## 67 4.167 78 ## 68 4.700 78 ## 69 2.067 65 ## 70 4.700 73 ## 71 4.033 82 ## 72 1.967 56 ## 73 4.500 79 ## 74 4.000 71 ## 75 1.983 62 ## 76 5.067 76 ## 77 2.017 60 ## 78 4.567 78 ## 79 3.883 76 ## 80 3.600 83 ## 81 4.133 75 ## 82 4.333 82 ## 83 4.100 70 ## 84 2.633 65 ## 85 4.067 73 ## 86 4.933 88 ## 87 3.950 76 ## 88 4.517 80 ## 89 2.167 48 ## 90 4.000 86 ## 91 2.200 60 ## 92 4.333 90 ## 93 1.867 50 ## 94 4.817 78 ## 95 1.833 63 ## 96 4.300 72 ## 97 4.667 84 ## 98 3.750 75 ## 99 1.867 51 ## 100 4.900 82 ## 101 2.483 62 ## 102 4.367 88 ## 103 2.100 49 ## 104 4.500 83 ## 105 4.050 81 ## 106 1.867 47 ## 107 4.700 84 ## 108 1.783 52 ## 109 4.850 86 ## 110 3.683 81 ## 111 4.733 75 ## 112 2.300 59 ## 113 4.900 89 ## 114 4.417 79 ## 115 1.700 59 ## 116 4.633 81 ## 117 2.317 50 ## 118 4.600 85 ## 119 1.817 59 ## 120 4.417 87 ## 121 2.617 53 ## 122 4.067 69 ## 123 4.250 77 ## 124 1.967 56 ## 125 4.600 88 ## 126 3.767 81 ## 127 1.917 45 ## 128 4.500 82 ## 129 2.267 55 ## 130 4.650 90 ## 131 1.867 45 ## 132 4.167 83 ## 133 2.800 56 ## 134 4.333 89 ## 135 1.833 46 ## 136 4.383 82 ## 137 1.883 51 ## 138 4.933 86 ## 139 2.033 53 ## 140 3.733 79 ## 141 4.233 81 ## 142 2.233 60 ## 143 4.533 82 ## 144 4.817 77 ## 145 4.333 76 ## 146 1.983 59 ## 147 4.633 80 ## 148 2.017 49 ## 149 5.100 96 ## 150 1.800 53 ## 151 5.033 77 ## 152 4.000 77 ## 153 2.400 65 ## 154 4.600 81 ## 155 3.567 71 ## 156 4.000 70 ## 157 4.500 81 ## 158 4.083 93 ## 159 1.800 53 ## 160 3.967 89 ## 161 2.200 45 ## 162 4.150 86 ## 163 2.000 58 ## 164 3.833 78 ## 165 3.500 66 ## 166 4.583 76 ## 167 2.367 63 ## 168 5.000 88 ## 169 1.933 52 ## 170 4.617 93 ## 171 1.917 49 ## 172 2.083 57 ## 173 4.583 77 ## 174 3.333 68 ## 175 4.167 81 ## 176 4.333 81 ## 177 4.500 73 ## 178 2.417 50 ## 179 4.000 85 ## 180 4.167 74 ## 181 1.883 55 ## 182 4.583 77 ## 183 4.250 83 ## 184 3.767 83 ## 185 2.033 51 ## 186 4.433 78 ## 187 4.083 84 ## 188 1.833 46 ## 189 4.417 83 ## 190 2.183 55 ## 191 4.800 81 ## 192 1.833 57 ## 193 4.800 76 ## 194 4.100 84 ## 195 3.966 77 ## 196 4.233 81 ## 197 3.500 87 ## 198 4.366 77 ## 199 2.250 51 ## 200 4.667 78 ## 201 2.100 60 ## 202 4.350 82 ## 203 4.133 91 ## 204 1.867 53 ## 205 4.600 78 ## 206 1.783 46 ## 207 4.367 77 ## 208 3.850 84 ## 209 1.933 49 ## 210 4.500 83 ## 211 2.383 71 ## 212 4.700 80 ## 213 1.867 49 ## 214 3.833 75 ## 215 3.417 64 ## 216 4.233 76 ## 217 2.400 53 ## 218 4.800 94 ## 219 2.000 55 ## 220 4.150 76 ## 221 1.867 50 ## 222 4.267 82 ## 223 1.750 54 ## 224 4.483 75 ## 225 4.000 78 ## 226 4.117 79 ## 227 4.083 78 ## 228 4.267 78 ## 229 3.917 70 ## 230 4.550 79 ## 231 4.083 70 ## 232 2.417 54 ## 233 4.183 86 ## 234 2.217 50 ## 235 4.450 90 ## 236 1.883 54 ## 237 1.850 54 ## 238 4.283 77 ## 239 3.950 79 ## 240 2.333 64 ## 241 4.150 75 ## 242 2.350 47 ## 243 4.933 86 ## 244 2.900 63 ## 245 4.583 85 ## 246 3.833 82 ## 247 2.083 57 ## 248 4.367 82 ## 249 2.133 67 ## 250 4.350 74 ## 251 2.200 54 ## 252 4.450 83 ## 253 3.567 73 ## 254 4.500 73 ## 255 4.150 88 ## 256 3.817 80 ## 257 3.917 71 ## 258 4.450 83 ## 259 2.000 56 ## 260 4.283 79 ## 261 4.767 78 ## 262 4.533 84 ## 263 1.850 58 ## 264 4.250 83 ## 265 1.983 43 ## 266 2.250 60 ## 267 4.750 75 ## 268 4.117 81 ## 269 2.150 46 ## 270 4.417 90 ## 271 1.817 46 ## 272 4.467 74 str(faithful) ## &#39;data.frame&#39;: 272 obs. of 2 variables: ## $ eruptions: num 3.6 1.8 3.33 2.28 4.53 ... ## $ waiting : num 79 54 74 62 85 55 88 85 51 85 ... eruptions ## Error in eval(expr, envir, enclos): 객체 &#39;eruptions&#39;를 찾을 수 없습니다 attach(faithful) eruptions ## [1] 3.600 1.800 3.333 2.283 4.533 2.883 4.700 3.600 ## [9] 1.950 4.350 1.833 3.917 4.200 1.750 4.700 2.167 ## [17] 1.750 4.800 1.600 4.250 1.800 1.750 3.450 3.067 ## [25] 4.533 3.600 1.967 4.083 3.850 4.433 4.300 4.467 ## [33] 3.367 4.033 3.833 2.017 1.867 4.833 1.833 4.783 ## [41] 4.350 1.883 4.567 1.750 4.533 3.317 3.833 2.100 ## [49] 4.633 2.000 4.800 4.716 1.833 4.833 1.733 4.883 ## [57] 3.717 1.667 4.567 4.317 2.233 4.500 1.750 4.800 ## [65] 1.817 4.400 4.167 4.700 2.067 4.700 4.033 1.967 ## [73] 4.500 4.000 1.983 5.067 2.017 4.567 3.883 3.600 ## [81] 4.133 4.333 4.100 2.633 4.067 4.933 3.950 4.517 ## [89] 2.167 4.000 2.200 4.333 1.867 4.817 1.833 4.300 ## [97] 4.667 3.750 1.867 4.900 2.483 4.367 2.100 4.500 ## [105] 4.050 1.867 4.700 1.783 4.850 3.683 4.733 2.300 ## [113] 4.900 4.417 1.700 4.633 2.317 4.600 1.817 4.417 ## [121] 2.617 4.067 4.250 1.967 4.600 3.767 1.917 4.500 ## [129] 2.267 4.650 1.867 4.167 2.800 4.333 1.833 4.383 ## [137] 1.883 4.933 2.033 3.733 4.233 2.233 4.533 4.817 ## [145] 4.333 1.983 4.633 2.017 5.100 1.800 5.033 4.000 ## [153] 2.400 4.600 3.567 4.000 4.500 4.083 1.800 3.967 ## [161] 2.200 4.150 2.000 3.833 3.500 4.583 2.367 5.000 ## [169] 1.933 4.617 1.917 2.083 4.583 3.333 4.167 4.333 ## [177] 4.500 2.417 4.000 4.167 1.883 4.583 4.250 3.767 ## [185] 2.033 4.433 4.083 1.833 4.417 2.183 4.800 1.833 ## [193] 4.800 4.100 3.966 4.233 3.500 4.366 2.250 4.667 ## [201] 2.100 4.350 4.133 1.867 4.600 1.783 4.367 3.850 ## [209] 1.933 4.500 2.383 4.700 1.867 3.833 3.417 4.233 ## [217] 2.400 4.800 2.000 4.150 1.867 4.267 1.750 4.483 ## [225] 4.000 4.117 4.083 4.267 3.917 4.550 4.083 2.417 ## [233] 4.183 2.217 4.450 1.883 1.850 4.283 3.950 2.333 ## [241] 4.150 2.350 4.933 2.900 4.583 3.833 2.083 4.367 ## [249] 2.133 4.350 2.200 4.450 3.567 4.500 4.150 3.817 ## [257] 3.917 4.450 2.000 4.283 4.767 4.533 1.850 4.250 ## [265] 1.983 2.250 4.750 4.117 2.150 4.417 1.817 4.467 waiting ## [1] 79 54 74 62 85 55 88 85 51 85 54 84 78 47 83 52 ## [17] 62 84 52 79 51 47 78 69 74 83 55 76 78 79 73 77 ## [33] 66 80 74 52 48 80 59 90 80 58 84 58 73 83 64 53 ## [49] 82 59 75 90 54 80 54 83 71 64 77 81 59 84 48 82 ## [65] 60 92 78 78 65 73 82 56 79 71 62 76 60 78 76 83 ## [81] 75 82 70 65 73 88 76 80 48 86 60 90 50 78 63 72 ## [97] 84 75 51 82 62 88 49 83 81 47 84 52 86 81 75 59 ## [113] 89 79 59 81 50 85 59 87 53 69 77 56 88 81 45 82 ## [129] 55 90 45 83 56 89 46 82 51 86 53 79 81 60 82 77 ## [145] 76 59 80 49 96 53 77 77 65 81 71 70 81 93 53 89 ## [161] 45 86 58 78 66 76 63 88 52 93 49 57 77 68 81 81 ## [177] 73 50 85 74 55 77 83 83 51 78 84 46 83 55 81 57 ## [193] 76 84 77 81 87 77 51 78 60 82 91 53 78 46 77 84 ## [209] 49 83 71 80 49 75 64 76 53 94 55 76 50 82 54 75 ## [225] 78 79 78 78 70 79 70 54 86 50 90 54 54 77 79 64 ## [241] 75 47 86 63 85 82 57 82 67 74 54 83 73 73 88 80 ## [257] 71 83 56 79 78 84 58 83 43 60 75 81 46 90 46 74 stem(waiting) ## ## The decimal point is 1 digit(s) to the right of the | ## ## 4 | 3 ## 4 | 55566666777788899999 ## 5 | 00000111111222223333333444444444 ## 5 | 555555666677788889999999 ## 6 | 00000022223334444 ## 6 | 555667899 ## 7 | 00001111123333333444444 ## 7 | 555555556666666667777777777778888888888888889999999999 ## 8 | 000000001111111111111222222222222333333333333334444444444 ## 8 | 55555566666677888888999 ## 9 | 00000012334 ## 9 | 6 sort(eruptions) ## [1] 1.600 1.667 1.700 1.733 1.750 1.750 1.750 1.750 ## [9] 1.750 1.750 1.783 1.783 1.800 1.800 1.800 1.800 ## [17] 1.817 1.817 1.817 1.833 1.833 1.833 1.833 1.833 ## [25] 1.833 1.833 1.850 1.850 1.867 1.867 1.867 1.867 ## [33] 1.867 1.867 1.867 1.867 1.883 1.883 1.883 1.883 ## [41] 1.917 1.917 1.933 1.933 1.950 1.967 1.967 1.967 ## [49] 1.983 1.983 1.983 2.000 2.000 2.000 2.000 2.017 ## [57] 2.017 2.017 2.033 2.033 2.067 2.083 2.083 2.100 ## [65] 2.100 2.100 2.133 2.150 2.167 2.167 2.183 2.200 ## [73] 2.200 2.200 2.217 2.233 2.233 2.250 2.250 2.267 ## [81] 2.283 2.300 2.317 2.333 2.350 2.367 2.383 2.400 ## [89] 2.400 2.417 2.417 2.483 2.617 2.633 2.800 2.883 ## [97] 2.900 3.067 3.317 3.333 3.333 3.367 3.417 3.450 ## [105] 3.500 3.500 3.567 3.567 3.600 3.600 3.600 3.600 ## [113] 3.683 3.717 3.733 3.750 3.767 3.767 3.817 3.833 ## [121] 3.833 3.833 3.833 3.833 3.850 3.850 3.883 3.917 ## [129] 3.917 3.917 3.950 3.950 3.966 3.967 4.000 4.000 ## [137] 4.000 4.000 4.000 4.000 4.033 4.033 4.050 4.067 ## [145] 4.067 4.083 4.083 4.083 4.083 4.083 4.100 4.100 ## [153] 4.117 4.117 4.133 4.133 4.150 4.150 4.150 4.150 ## [161] 4.167 4.167 4.167 4.167 4.183 4.200 4.233 4.233 ## [169] 4.233 4.250 4.250 4.250 4.250 4.267 4.267 4.283 ## [177] 4.283 4.300 4.300 4.317 4.333 4.333 4.333 4.333 ## [185] 4.333 4.350 4.350 4.350 4.350 4.366 4.367 4.367 ## [193] 4.367 4.383 4.400 4.417 4.417 4.417 4.417 4.433 ## [201] 4.433 4.450 4.450 4.450 4.467 4.467 4.483 4.500 ## [209] 4.500 4.500 4.500 4.500 4.500 4.500 4.500 4.517 ## [217] 4.533 4.533 4.533 4.533 4.533 4.550 4.567 4.567 ## [225] 4.567 4.583 4.583 4.583 4.583 4.600 4.600 4.600 ## [233] 4.600 4.617 4.633 4.633 4.633 4.650 4.667 4.667 ## [241] 4.700 4.700 4.700 4.700 4.700 4.700 4.716 4.733 ## [249] 4.750 4.767 4.783 4.800 4.800 4.800 4.800 4.800 ## [257] 4.800 4.817 4.817 4.833 4.833 4.850 4.883 4.900 ## [265] 4.900 4.933 4.933 4.933 5.000 5.033 5.067 5.100 hist(eruptions) hist(eruptions, seq(1.6, 5.2, 0.2), prob=TRUE) lines(density(eruptions, bw=0.1)) rug(eruptions) # ?hist # ?density lines(density(eruptions, bw=&quot;SJ&quot;), lty=3) plot(ecdf(eruptions), do.points=FALSE, verticals=TRUE) # ?plot ecdf(eruptions) ## Empirical CDF ## Call: ecdf(eruptions) ## x[1:126] = 1.6, 1.7, 1.7, ..., 5.1, 5.1 x = ecdf(eruptions) x ## Empirical CDF ## Call: ecdf(eruptions) ## x[1:126] = 1.6, 1.7, 1.7, ..., 5.1, 5.1 str(x) ## function (v) ## - attr(*, &quot;class&quot;)= chr [1:3] &quot;ecdf&quot; &quot;stepfun&quot; &quot;function&quot; ## - attr(*, &quot;call&quot;)= language ecdf(eruptions) x() ## Error in .approxfun(x, y, v, method, yleft, yright, f): 기본값이 없는 인수 &quot;v&quot;가 누락되어 있습니다 plot(ecdf(eruptions), do.points=FALSE) plot(ecdf(eruptions)) long &lt;- eruptions[eruptions &gt; 3] x &lt;- seq(3, 5.4, 0.01) pnorm(x, mean=mean(long), sd=sqrt(var(long))) ## [1] 0.0008362 0.0009084 0.0009864 0.0010704 0.0011610 ## [6] 0.0012585 0.0013635 0.0014764 0.0015978 0.0017282 ## [11] 0.0018682 0.0020185 0.0021797 0.0023524 0.0025375 ## [16] 0.0027356 0.0029476 0.0031743 0.0034165 0.0036752 ## [21] 0.0039514 0.0042460 0.0045601 0.0048947 0.0052511 ## [26] 0.0056304 0.0060338 0.0064627 0.0069183 0.0074020 ## [31] 0.0079152 0.0084596 0.0090365 0.0096475 0.0102944 ## [36] 0.0109788 0.0117024 0.0124670 0.0132746 0.0141269 ## [41] 0.0150260 0.0159739 0.0169725 0.0180241 0.0191306 ## [46] 0.0202945 0.0215177 0.0228028 0.0241519 0.0255674 ## [51] 0.0270518 0.0286074 0.0302366 0.0319421 0.0337262 ## [56] 0.0355915 0.0375406 0.0395759 0.0417001 0.0439157 ## [61] 0.0462253 0.0486315 0.0511367 0.0537436 0.0564547 ## [66] 0.0592723 0.0621991 0.0652374 0.0683897 0.0716581 ## [71] 0.0750451 0.0785529 0.0821835 0.0859391 0.0898217 ## [76] 0.0938331 0.0979753 0.1022500 0.1066587 0.1112030 ## [81] 0.1158842 0.1207037 0.1256626 0.1307619 0.1360025 ## [86] 0.1413850 0.1469102 0.1525783 0.1583896 0.1643443 ## [91] 0.1704423 0.1766832 0.1830667 0.1895922 0.1962589 ## [96] 0.2030658 0.2100116 0.2170952 0.2243149 0.2316689 ## [101] 0.2391554 0.2467722 0.2545170 0.2623872 0.2703803 ## [106] 0.2784932 0.2867229 0.2950662 0.3035195 0.3120794 ## [111] 0.3207419 0.3295032 0.3383590 0.3473052 0.3563373 ## [116] 0.3654507 0.3746407 0.3839025 0.3932310 0.4026213 ## [121] 0.4120681 0.4215661 0.4311100 0.4406943 0.4503134 ## [126] 0.4599618 0.4696339 0.4793239 0.4890262 0.4987349 ## [131] 0.5084444 0.5181489 0.5278427 0.5375199 0.5471751 ## [136] 0.5568024 0.5663963 0.5759512 0.5854617 0.5949224 ## [141] 0.6043279 0.6136730 0.6229527 0.6321619 0.6412957 ## [146] 0.6503494 0.6593184 0.6681982 0.6769845 0.6856732 ## [151] 0.6942601 0.7027416 0.7111139 0.7193735 0.7275172 ## [156] 0.7355417 0.7434443 0.7512220 0.7588724 0.7663930 ## [161] 0.7737818 0.7810366 0.7881558 0.7951377 0.8019809 ## [166] 0.8086842 0.8152465 0.8216671 0.8279453 0.8340805 ## [171] 0.8400726 0.8459213 0.8516267 0.8571890 0.8626087 ## [176] 0.8678862 0.8730222 0.8780176 0.8828733 0.8875905 ## [181] 0.8921703 0.8966142 0.9009236 0.9051002 0.9091456 ## [186] 0.9130615 0.9168500 0.9205130 0.9240526 0.9274708 ## [191] 0.9307700 0.9339522 0.9370200 0.9399756 0.9428215 ## [196] 0.9455601 0.9481939 0.9507254 0.9531571 0.9554916 ## [201] 0.9577315 0.9598792 0.9619375 0.9639088 0.9657957 ## [206] 0.9676007 0.9693264 0.9709753 0.9725498 0.9740525 ## [211] 0.9754857 0.9768519 0.9781534 0.9793926 0.9805717 ## [216] 0.9816930 0.9827587 0.9837709 0.9847318 0.9856434 ## [221] 0.9865077 0.9873267 0.9881024 0.9888365 0.9895310 ## [226] 0.9901874 0.9908077 0.9913933 0.9919460 0.9924672 ## [231] 0.9929585 0.9934212 0.9938569 0.9942668 0.9946523 ## [236] 0.9950145 0.9953548 0.9956741 0.9959737 0.9962546 ## [241] 0.9965177 # ?par x &lt;- rt(250, df = 5) qqnorm(x); qqline(x) curve(dnorm, -5, 5) y = density(x) lines(y, lty=3) # ?ppoints ppoints(250) ## [1] 0.002 0.006 0.010 0.014 0.018 0.022 0.026 0.030 ## [9] 0.034 0.038 0.042 0.046 0.050 0.054 0.058 0.062 ## [17] 0.066 0.070 0.074 0.078 0.082 0.086 0.090 0.094 ## [25] 0.098 0.102 0.106 0.110 0.114 0.118 0.122 0.126 ## [33] 0.130 0.134 0.138 0.142 0.146 0.150 0.154 0.158 ## [41] 0.162 0.166 0.170 0.174 0.178 0.182 0.186 0.190 ## [49] 0.194 0.198 0.202 0.206 0.210 0.214 0.218 0.222 ## [57] 0.226 0.230 0.234 0.238 0.242 0.246 0.250 0.254 ## [65] 0.258 0.262 0.266 0.270 0.274 0.278 0.282 0.286 ## [73] 0.290 0.294 0.298 0.302 0.306 0.310 0.314 0.318 ## [81] 0.322 0.326 0.330 0.334 0.338 0.342 0.346 0.350 ## [89] 0.354 0.358 0.362 0.366 0.370 0.374 0.378 0.382 ## [97] 0.386 0.390 0.394 0.398 0.402 0.406 0.410 0.414 ## [105] 0.418 0.422 0.426 0.430 0.434 0.438 0.442 0.446 ## [113] 0.450 0.454 0.458 0.462 0.466 0.470 0.474 0.478 ## [121] 0.482 0.486 0.490 0.494 0.498 0.502 0.506 0.510 ## [129] 0.514 0.518 0.522 0.526 0.530 0.534 0.538 0.542 ## [137] 0.546 0.550 0.554 0.558 0.562 0.566 0.570 0.574 ## [145] 0.578 0.582 0.586 0.590 0.594 0.598 0.602 0.606 ## [153] 0.610 0.614 0.618 0.622 0.626 0.630 0.634 0.638 ## [161] 0.642 0.646 0.650 0.654 0.658 0.662 0.666 0.670 ## [169] 0.674 0.678 0.682 0.686 0.690 0.694 0.698 0.702 ## [177] 0.706 0.710 0.714 0.718 0.722 0.726 0.730 0.734 ## [185] 0.738 0.742 0.746 0.750 0.754 0.758 0.762 0.766 ## [193] 0.770 0.774 0.778 0.782 0.786 0.790 0.794 0.798 ## [201] 0.802 0.806 0.810 0.814 0.818 0.822 0.826 0.830 ## [209] 0.834 0.838 0.842 0.846 0.850 0.854 0.858 0.862 ## [217] 0.866 0.870 0.874 0.878 0.882 0.886 0.890 0.894 ## [225] 0.898 0.902 0.906 0.910 0.914 0.918 0.922 0.926 ## [233] 0.930 0.934 0.938 0.942 0.946 0.950 0.954 0.958 ## [241] 0.962 0.966 0.970 0.974 0.978 0.982 0.986 0.990 ## [249] 0.994 0.998 ppoints(10) ## [1] 0.06098 0.15854 0.25610 0.35366 0.45122 0.54878 ## [7] 0.64634 0.74390 0.84146 0.93902 qqplot(qt(ppoints(250), df = 5), x, xlab = &quot;Q-Q plot for t dsn&quot;) windows() qqplot(qt(runif(250), df = 5), x, xlab = &quot;Q-Q plot for t dsn&quot;) # ?shapiro.test # ?ks.test # ?t.test A = c(79.98, 80.04, 80.02, 80.04, 80.03, 80.03, 80.04, 79.97, 80.05, 80.03, 80.02, 80.00, 80.02) B = c(80.02, 79.94, 79.98, 79.97, 79.97, 80.03, 79.95, 79.97) boxplot(A, B) t.test(A, B) ## ## Welch Two Sample t-test ## ## data: A and B ## t = 3.2, df = 12, p-value = 0.007 ## alternative hypothesis: true difference in means is not equal to 0 ## 95 percent confidence interval: ## 0.01386 0.07018 ## sample estimates: ## mean of x mean of y ## 80.02 79.98 var.test(A, B) ## ## F test to compare two variances ## ## data: A and B ## F = 0.58, num df = 12, denom df = 7, p-value = ## 0.4 ## alternative hypothesis: true ratio of variances is not equal to 1 ## 95 percent confidence interval: ## 0.1251 2.1053 ## sample estimates: ## ratio of variances ## 0.5837 t.test(A, B, var.equal=TRUE) ## ## Two Sample t-test ## ## data: A and B ## t = 3.5, df = 19, p-value = 0.003 ## alternative hypothesis: true difference in means is not equal to 0 ## 95 percent confidence interval: ## 0.01669 0.06735 ## sample estimates: ## mean of x mean of y ## 80.02 79.98 wilcox.test(A, B) ## Warning in wilcox.test.default(A, B): cannot compute ## exact p-value with ties ## ## Wilcoxon rank sum test with continuity ## correction ## ## data: A and B ## W = 89, p-value = 0.007 ## alternative hypothesis: true location shift is not equal to 0 plot(ecdf(A), do.points=FALSE, verticals=TRUE, xlim=range(A, B)) plot(ecdf(B), do.points=FALSE, verticals=TRUE, add=TRUE) ks.test(A, B) ## Warning in ks.test(A, B): cannot compute exact p-value ## with ties ## ## Two-sample Kolmogorov-Smirnov test ## ## data: A and B ## D = 0.6, p-value = 0.06 ## alternative hypothesis: two-sided # Chapter 9 Grouping, loops and conditional execution # { } does grouping # Usefulness of loops: for &gt;&gt; while &gt;&gt; repeat for (i in 1:10) { print(2*i) } ## [1] 2 ## [1] 4 ## [1] 6 ## [1] 8 ## [1] 10 ## [1] 12 ## [1] 14 ## [1] 16 ## [1] 18 ## [1] 20 for (i in 1:10) print(2*i) ## [1] 2 ## [1] 4 ## [1] 6 ## [1] 8 ## [1] 10 ## [1] 12 ## [1] 14 ## [1] 16 ## [1] 18 ## [1] 20 #while ( ) { ## Statements #} # # if ~ else ~ # if ( ) { # # Statements 1 # } else { # # Statements 2 # } # # if ( ) # Statement1 # else # Statement2 # # if ( ) { # # Statements 1 # } else if ( ) { # # Statements 2 # } else if ( ) { # # Statements 3 # } else { # # Statements 4 # } # # # Chapter 10 Writing your own functions Square = function(x=0) { return(x*x) } twosam = function(y1, y2) { n1 = length(y1) n2 = length(y2) yb1 = mean(y1) yb2 = mean(y2) s1 = var(y1) s2 = var(y2) s = ((n1 - 1)*s1 + (n2 - 1)*s2)/(n1 + n2 - 2) tst = (yb1 - yb2)/sqrt(s*(1/n1 + 1/n2)) return (tst) } x = rnorm(10) y = rt(10, 5) twosam(x, y) ## [1] 0.2976 T.test = function(y1, y2) { n1 = length(y1) n2 = length(y2) yb1 = mean(y1) yb2 = mean(y2) s1 = var(y1) s2 = var(y2) s = ((n1 - 1)*s1 + (n2 - 1)*s2)/(n1 + n2 - 2) tst = (yb1 - yb2)/sqrt(s*(1/n1 + 1/n2)) DF = n1 + n2 - 2 p.val = 2*(1 - pt(abs(tst), df=DF)) Res = list(tst, DF, p.val, yb1, yb2) names(Res) = c(&quot;t&quot;, &quot;df&quot;, &quot;p-value&quot;, &quot;mean of x&quot;, &quot;mean of y&quot;) return (Res) } res = T.test(x, y) t.test(x, y) ## ## Welch Two Sample t-test ## ## data: x and y ## t = 0.3, df = 18, p-value = 0.8 ## alternative hypothesis: true difference in means is not equal to 0 ## 95 percent confidence interval: ## -1.057 1.405 ## sample estimates: ## mean of x mean of y ## 0.3344 0.1604 bslash = function(X, y) { X = qr(X) return (qr.coef(X, y)) } regcoeff = bslash(Xmat, yvar) ## Error in qr(X): 객체 &#39;Xmat&#39;를 찾을 수 없습니다 &quot;%^%&quot; = function(S, pow) with(eigen(S), vectors %*% (abs(values)^pow * t(vectors))) M = matrix(c(2,1,1,2), nrow=2) ; M ## [,1] [,2] ## [1,] 2 1 ## [2,] 1 2 M %^% 0.5 ## [,1] [,2] ## [1,] 1.366 0.366 ## [2,] 0.366 1.366 sqrtM = M%^%0.5 ; sqrtM ## [,1] [,2] ## [1,] 1.366 0.366 ## [2,] 0.366 1.366 sqrtM %*% sqrtM ## [,1] [,2] ## [1,] 2 1 ## [2,] 1 2 area = function(f, a, b, eps=1.0e-06, lim=10) { fun1 = function(f, a, b, fa, fb, a0, eps, lim, fun) { ## function &#39;fun1’is only visible inside &#39;area’ d = (a + b)/2 h = (b - a)/4 fd = f(d) a1 = h * (fa + fd) a2 = h * (fd + fb) if (abs(a0 - a1 - a2) &lt; eps || lim == 0) return (a1 + a2) else { return (fun(f, a, d, fa, fd, a1, eps, lim - 1, fun) + fun(f, d, b, fd, fb, a2, eps, lim - 1, fun)) } } fa = f(a) fb = f(b) a0 = ((fa + fb) * (b - a))/2 fun1(f, a, b, fa, fb, a0, eps, lim, fun1) } area(dnorm, 0, 1) ## [1] 0.3413 integrate(dnorm, 0, 1) ## 0.3413 with absolute error &lt; 3.8e-15 pnorm(1) - pnorm(0) ## [1] 0.3413 f = function(x) { y = 2*x print(x) print(y) print(z) } f(1) ## [1] 1 ## [1] 2 ## Error in print(z): 객체 &#39;z&#39;를 찾을 수 없습니다 z = 3 f(1) ## [1] 1 ## [1] 2 ## [1] 3 cube = function(n) { sq = function() n*n n*sq() } cube(5) ## [1] 125 open.account = function(total) { list( deposit = function(amount) { if(amount &lt;= 0) stop(&quot;Deposits must be positive!\\n&quot;) total &lt;&lt;- total + amount cat(amount, &quot;deposited. Your balance is&quot;, total, &quot;\\n\\n&quot;) }, withdraw = function(amount) { if(amount &gt; total) stop(&quot;You don’t have that much money!\\n&quot;) total &lt;&lt;- total - amount cat(amount, &quot;withdrawn. Your balance is&quot;, total, &quot;\\n\\n&quot;) }, balance = function() { cat(&quot;Your balance is&quot;, total, &quot;\\n\\n&quot;) } ) } ross = open.account(100) robert = open.account(200) ross$balance() ## Your balance is 100 robert$balance() ## Your balance is 200 ross$deposit(50) ## 50 deposited. Your balance is 150 ross$balance() ## Your balance is 150 ross$withdraw(500) ## Error in ross$withdraw(500): You don’t have that much money! # More basic keywords and functions 1 %in% c(1,2,3,4) ## [1] TRUE 5 %in% c(1,2,3,4) ## [1] FALSE is.finite(Inf) ## [1] FALSE prod(1:3) ## [1] 6 cummax(1:10) ## [1] 1 2 3 4 5 6 7 8 9 10 cummax(10:1) ## [1] 10 10 10 10 10 10 10 10 10 10 # ?xor x = 11:20 x ## [1] 11 12 13 14 15 16 17 18 19 20 which(x==3) ## integer(0) which(x==13) ## [1] 3 length(x) ## [1] 10 y = &quot;my string&quot; length(y) ## [1] 1 nchar(y) ## [1] 9 strsplit(y, &quot; &quot;) ## [[1]] ## [1] &quot;my&quot; &quot;string&quot; strsplit(y, &quot; &quot;)[[1]] ## [1] &quot;my&quot; &quot;string&quot; substr(y, 4, 5) ## [1] &quot;st&quot; sample(1:10) ## [1] 10 4 8 1 3 5 9 6 2 7 sample(1:10, 20) ## Error in sample.int(length(x), size, replace, prob): &#39;replace = FALSE&#39; 일때는 모집단보다 큰 샘플을 가질 수 없습니다 sample(1:10, 20, replace=TRUE) ## [1] 2 9 9 4 1 2 3 5 3 4 7 4 4 7 8 9 3 7 3 8 sample(rep(1:10,2)) ## [1] 2 8 8 6 6 3 4 3 5 1 7 1 5 10 2 10 4 ## [18] 9 7 9 ## Error in na.locf(.): 함수 &quot;na.locf&quot;를 찾을 수 없습니다 ## Error in split(Freqlist, Freqlist[, &quot;Title&quot;]): 객체 &#39;Freqlist&#39;를 찾을 수 없습니다 4.2 The basics ## Error in knitr::kable(Freqfinal[[1]], caption = names(Freqfinal)[1], booktabs = TRUE, : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[2]], caption = names(Freqfinal)[2], booktabs = TRUE, : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[3]], caption = names(Freqfinal)[3], booktabs = TRUE, : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[4]], caption = names(Freqfinal)[4], booktabs = TRUE, : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[5]], caption = names(Freqfinal)[5], booktabs = TRUE, : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[6]], caption = names(Freqfinal)[6], booktabs = TRUE, : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[7]], caption = names(Freqfinal)[7], booktabs = TRUE, : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[8]], caption = names(Freqfinal)[8], booktabs = TRUE, : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[9]], caption = names(Freqfinal)[9], booktabs = TRUE, : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[10]], caption = names(Freqfinal)[10], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[11]], caption = names(Freqfinal)[11], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 4.3 Common data structures ## Error in knitr::kable(Freqfinal[[12]], caption = names(Freqfinal)[12], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[13]], caption = names(Freqfinal)[13], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[14]], caption = names(Freqfinal)[14], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[15]], caption = names(Freqfinal)[15], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 4.4 Statistics ## Error in knitr::kable(Freqfinal[[16]], caption = names(Freqfinal)[16], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[17]], caption = names(Freqfinal)[17], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[18]], caption = names(Freqfinal)[18], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[19]], caption = names(Freqfinal)[19], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[20]], caption = names(Freqfinal)[20], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 4.5 Working with R ## Error in knitr::kable(Freqfinal[[21]], caption = names(Freqfinal)[21], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[22]], caption = names(Freqfinal)[22], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[23]], caption = names(Freqfinal)[23], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 4.6 I/O ## Error in knitr::kable(Freqfinal[[24]], caption = names(Freqfinal)[24], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[25]], caption = names(Freqfinal)[25], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 ## Error in knitr::kable(Freqfinal[[26]], caption = names(Freqfinal)[26], : 객체 &#39;Freqfinal&#39;를 찾을 수 없습니다 "],
["stringr-and-lubridate.html", "Chapter 5 stringr and lubridate", " Chapter 5 stringr and lubridate 2017-05-24 조용순 전공의 강의 11주차 강의 자료입니다. #&quot;Stringr&quot; #R 표준 base 패키지에 포함된 함수군와 비슷한 기능을 하는 것으로 보이지만 더 합리적인 출력형식을 가지므로 사용하기 편리함 #패키지의 특징 #1) factor와 character를 같은 방식으로 처리 #2) 일관성 있는 함수 이름과 인수 #3) 다른 함수의 입력값으로 사용하기 편리한 출력값. # -입력값 NA가 포함되어 있을 때는 그 부분의 결과를 NA로 돌려줌 #4) 사용빈도가 떨어지는 문자열 조작 처리를 과감하게 제거하여 간략화시킴 #1. Installation #install.packages(&quot;stringr&quot;) library(stringr) #2. Functions #1) str_length(string): 문자열의 길이를 계산 #문자열의 길이를 계산해주는 함수 #base::nchar(x)와 같은 기능을 하는 함수 #단, NA 에 대해서는 2가 아닌 NA를 돌려줍니다. str_length(c(&quot;i&quot;, &quot;like&quot;, &quot;programming&quot;, NA)) ## [1] 1 4 11 NA #&gt; [1] 1 4 11 NA nchar(c(&quot;i&quot;, &quot;like&quot;, &quot;programming&quot;, NA)) ## [1] 1 4 11 NA #&gt; [1] 1 4 11 2 #2) str_sub(string, start=1, end=-1) #문자열을 부분적으로 참조, 변경해주는 함수 #base::substr()와 같은 기능을 하는 함수 #음수를 사용하여 문자열의 끝으로 부터의 위치를 지정할 수 있습니다. x &lt;- &quot;Michael Carreon&quot; str_sub(x,start=1,end=9) ## [1] &quot;Michael C&quot; #&gt; [1] &quot;Michael C&quot; * 띄어쓰기까지 포함하여 9번째 문자까지 반환해줍니다. str_sub(x,1,9) ## [1] &quot;Michael C&quot; #&gt; [1] &quot;Michael C&quot; * start와 end는 쓰지 않아도 무방합니다. str_sub(x,end=7) ## [1] &quot;Michael&quot; #&gt; [1] &quot;Michael&quot; * start 값을 지정해주지 않으면, default 값인 1로 지정됩니다. 즉, str_sub(x,1,7)과 같은 값이 반환됩니다. str_sub(x,-7) ## [1] &quot;Carreon&quot; #&gt; [1] &quot;Carreon&quot; * 음수를 통하여 문자열 끝부터 7번째 오는 문자부터 반환해줍니다. #Base R substr(x,1,7) ## [1] &quot;Michael&quot; #&gt; [1] &quot;Michael&quot; #3) str_c(..., sep=&#39;&#39;, collapse=NULL) #문자열을 통합해주는 함수 #sep의 default가 스페이스 공백이 아니므로 base::paste0()와 비슷합니다. str_c(letters[-26], &quot; comes before &quot;, letters[-1]) ## [1] &quot;a comes before b&quot; &quot;b comes before c&quot; ## [3] &quot;c comes before d&quot; &quot;d comes before e&quot; ## [5] &quot;e comes before f&quot; &quot;f comes before g&quot; ## [7] &quot;g comes before h&quot; &quot;h comes before i&quot; ## [9] &quot;i comes before j&quot; &quot;j comes before k&quot; ## [11] &quot;k comes before l&quot; &quot;l comes before m&quot; ## [13] &quot;m comes before n&quot; &quot;n comes before o&quot; ## [15] &quot;o comes before p&quot; &quot;p comes before q&quot; ## [17] &quot;q comes before r&quot; &quot;r comes before s&quot; ## [19] &quot;s comes before t&quot; &quot;t comes before u&quot; ## [21] &quot;u comes before v&quot; &quot;v comes before w&quot; ## [23] &quot;w comes before x&quot; &quot;x comes before y&quot; ## [25] &quot;y comes before z&quot; #[1] &quot;a comes before b&quot; &quot;b comes before c&quot; &quot;c comes before d&quot; &quot;d comes before e&quot; &quot;e comes before f&quot; #[6] &quot;f comes before g&quot; &quot;g comes before h&quot; &quot;h comes before i&quot; &quot;i comes before j&quot; &quot;j comes before k&quot; #[11] &quot;k comes before l&quot; &quot;l comes before m&quot; &quot;m comes before n&quot; &quot;n comes before o&quot; &quot;o comes before p&quot; #[16] &quot;p comes before q&quot; &quot;q comes before r&quot; &quot;r comes before s&quot; &quot;s comes before t&quot; &quot;t comes before u&quot; #[21] &quot;u comes before v&quot; &quot;v comes before w&quot; &quot;w comes before x&quot; &quot;x comes before y&quot; &quot;y comes before z&quot; ##Base R paste0(letters[-26], &quot; comes before &quot;, letters[-1]) ## [1] &quot;a comes before b&quot; &quot;b comes before c&quot; ## [3] &quot;c comes before d&quot; &quot;d comes before e&quot; ## [5] &quot;e comes before f&quot; &quot;f comes before g&quot; ## [7] &quot;g comes before h&quot; &quot;h comes before i&quot; ## [9] &quot;i comes before j&quot; &quot;j comes before k&quot; ## [11] &quot;k comes before l&quot; &quot;l comes before m&quot; ## [13] &quot;m comes before n&quot; &quot;n comes before o&quot; ## [15] &quot;o comes before p&quot; &quot;p comes before q&quot; ## [17] &quot;q comes before r&quot; &quot;r comes before s&quot; ## [19] &quot;s comes before t&quot; &quot;t comes before u&quot; ## [21] &quot;u comes before v&quot; &quot;v comes before w&quot; ## [23] &quot;w comes before x&quot; &quot;x comes before y&quot; ## [25] &quot;y comes before z&quot; str_c(letters, collapse = &quot;, &quot;) ## [1] &quot;a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z&quot; #&gt; [1] &quot;a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z&quot; #sep와 collapse의 차이는 한 벡터 안에 존재하느냐 아니냐입니다. str_c(&quot;안&quot;,&quot;녕&quot;,&quot;하&quot;,&quot;세&quot;,&quot;요&quot;,sep=&quot;_&quot;) ## [1] &quot;안_녕_하_세_요&quot; #&gt; [1] &quot;안_녕_하_세_요&quot; str_c(c(&quot;안&quot;,&quot;녕&quot;,&quot;하&quot;,&quot;세&quot;,&quot;요&quot;),collapse=&quot;_&quot;) ## [1] &quot;안_녕_하_세_요&quot; #&gt; [1] &quot;안_녕_하_세_요&quot; #4) str_split(string, pattern, n=Inf) #문자열을 분리해주는 함수--&gt; 결과값은 list입니다. #base::strsplit(x, split)와 대응하는 함수입니다. #str_split_fixed()도 있고, 결과값은 matrix fruits &lt;- c(&quot;apples and oranges and pears and bananas&quot;, &quot;pineapples and mangos and guavas&quot;) str_split(fruits, &quot; and &quot;) ## [[1]] ## [1] &quot;apples&quot; &quot;oranges&quot; &quot;pears&quot; &quot;bananas&quot; ## ## [[2]] ## [1] &quot;pineapples&quot; &quot;mangos&quot; &quot;guavas&quot; #&gt; [[1]] #&gt; [1] &quot;apples&quot; &quot;oranges&quot; &quot;pears&quot; &quot;bananas&quot; #&gt; #&gt; [[2]] #&gt; [1] &quot;pineapples&quot; &quot;mangos&quot; &quot;guavas&quot; #Base R strsplit(fruits, &quot;and&quot;) ## [[1]] ## [1] &quot;apples &quot; &quot; oranges &quot; &quot; pears &quot; &quot; bananas&quot; ## ## [[2]] ## [1] &quot;pineapples &quot; &quot; mangos &quot; &quot; guavas&quot; #&gt; [[1]] #&gt; [1] &quot;apples &quot; &quot; oranges &quot; &quot; pears &quot; &quot; bananas&quot; #&gt; #&gt; [[2]] #&gt; [1] &quot;pineapples &quot; &quot; mangos &quot; &quot; guavas&quot; str_split(fruits, &quot; and &quot;, n = 3) ## [[1]] ## [1] &quot;apples&quot; &quot;oranges&quot; ## [3] &quot;pears and bananas&quot; ## ## [[2]] ## [1] &quot;pineapples&quot; &quot;mangos&quot; &quot;guavas&quot; #&gt; [[1]] #&gt; [1] &quot;apples&quot; &quot;oranges&quot; &quot;pears and bananas&quot; #&gt; #&gt; [[2]] #&gt; [1] &quot;pineapples&quot; &quot;mangos&quot; &quot;guavas&quot; str_split(fruits, &quot; and &quot;, n = 2) ## [[1]] ## [1] &quot;apples&quot; ## [2] &quot;oranges and pears and bananas&quot; ## ## [[2]] ## [1] &quot;pineapples&quot; &quot;mangos and guavas&quot; #&gt; [[1]] #&gt; [1] &quot;apples&quot; &quot;oranges and pears and bananas&quot; #&gt; #&gt; [[2]] #&gt; [1] &quot;pineapples&quot; &quot;mangos and guavas&quot; str_split_fixed(fruits, &quot; and &quot;, 4) ## [,1] [,2] [,3] [,4] ## [1,] &quot;apples&quot; &quot;oranges&quot; &quot;pears&quot; &quot;bananas&quot; ## [2,] &quot;pineapples&quot; &quot;mangos&quot; &quot;guavas&quot; &quot;&quot; #&gt; [,1] [,2] [,3] [,4] #&gt; [1,] &quot;apples&quot; &quot;oranges&quot; &quot;pears&quot; &quot;bananas&quot; #&gt; [2,] &quot;pineapples&quot; &quot;mangos&quot; &quot;guavas&quot; &quot; #5)str_detect(string, pattern) #매치하는 곳이 있는지 없는지를 logical 값(True or False)으로 반환해주는 함수 #base::grepl(pattern, x)과 대응 fruit &lt;- c(&quot;apple&quot;, &quot;banana&quot;, &quot;pear&quot;, &quot;pinapple&quot;) str_detect(fruit, &quot;a&quot;) ## [1] TRUE TRUE TRUE TRUE #&gt; [1] TRUE TRUE TRUE TRUE str_detect(fruit, &quot;^a&quot;) ## [1] TRUE FALSE FALSE FALSE #&gt; [1] TRUE FALSE FALSE FALSE str_detect(fruit, &quot;a$&quot;) ## [1] FALSE TRUE FALSE FALSE #&gt; [1] FALSE TRUE FALSE FALSE str_detect(fruit, &quot;b&quot;) ## [1] FALSE TRUE FALSE FALSE #&gt; [1] FALSE TRUE FALSE FALSE str_detect(fruit, &quot;[aeiou]&quot;) ## [1] TRUE TRUE TRUE TRUE #&gt; [1] TRUE TRUE TRUE TRUE #6) str_count(string, pattern) #매치하는 곳의 수를 반환해주는 함수 #그 글자가 몇 개 포함되어 있는지 알려줍니다. str_count(fruit, &quot;p&quot;) ## [1] 2 0 1 3 #&gt; [1] 2 0 1 3 str_count(fruit, c(&quot;a&quot;, &quot;b&quot;, &quot;p&quot;, &quot;p&quot;)) ## [1] 1 1 1 3 #&gt; [1] 1 1 1 3 #7)str_locate(string, pattern) #처음으로 매치되는 곳의 start, end 위치를 행렬로 반환해주는 함수 str_locate(fruit, &quot;e&quot;) ## start end ## [1,] 5 5 ## [2,] NA NA ## [3,] 2 2 ## [4,] 8 8 #&gt; start end #&gt; [1,] 5 5 #&gt; [2,] NA NA #&gt; [3,] 2 2 #&gt; [4,] 8 8 str_locate(fruit, &quot;pl&quot;) ## start end ## [1,] 3 4 ## [2,] NA NA ## [3,] NA NA ## [4,] 6 7 #&gt; start end #&gt; [1,] 3 4 #&gt; [2,] NA NA #&gt; [3,] NA NA #&gt; [4,] 6 7 #8)str_extract(string, pattern) #매치된 부분 문자열을 추출하는 함수 #매치되지 않은 요소는 NA로 출력합니다 #base::grep(pattern, x, value=TRUE)와 비슷하나 이 함수는 매치된 요소만 원래의 형태로 돌려줍니다 shopping_list &lt;- c(&quot;apples x4&quot;, &quot;flour&quot;, &quot;sugar&quot;, &quot;milk x2&quot;) str_extract(shopping_list, &quot;\\\\d&quot;) ## [1] &quot;4&quot; NA NA &quot;2&quot; #&gt; [1] &quot;4&quot; NA NA &quot;2&quot; grep(&quot;\\\\d&quot;, shopping_list, value = TRUE) ## [1] &quot;apples x4&quot; &quot;milk x2&quot; #&gt; [1] &quot;apples x4&quot; &quot;milk x2&quot; str_extract(shopping_list, &quot;[a-z]+&quot;) ## [1] &quot;apples&quot; &quot;flour&quot; &quot;sugar&quot; &quot;milk&quot; #&gt; [1] &quot;apples&quot; &quot;flour&quot; &quot;sugar&quot; &quot;milk&quot; grep(&quot;[a-z]+&quot;, shopping_list, value = TRUE) ## [1] &quot;apples x4&quot; &quot;flour&quot; &quot;sugar&quot; &quot;milk x2&quot; #&gt; [1] &quot;apples x4&quot; &quot;flour&quot; &quot;sugar&quot; &quot;milk x2&quot; #9)str_match(string, pattern) #매치된 부분 문자열을 추출하고 참조를 행렬로 돌려주는 함수 #str_extract 함수의 결과를 1열에 , 각 괄호에 매치된 이후의 결과가 2열 이후에 들어갑니다. strings &lt;- c(&quot; 219 733 8965&quot;, &quot;329-293-8753 &quot;, &quot;banana&quot;, &quot;595 794 7569&quot;, &quot;387 287 6718&quot;, &quot;apple&quot;, &quot;233.398.9187 &quot;, &quot;482 952 3315&quot;, &quot;239 923 8115&quot;, &quot;842 566 4692&quot;, &quot;Work: 579-499-7527&quot;, &quot;$1000&quot;, &quot;Home: 543.355.3679&quot;) phone &lt;- &quot;([2-9][0-9]{2})[- .]([0-9]{3})[- .]([0-9]{4})&quot; str_extract(strings, phone) ## [1] &quot;219 733 8965&quot; &quot;329-293-8753&quot; NA ## [4] &quot;595 794 7569&quot; &quot;387 287 6718&quot; NA ## [7] &quot;233.398.9187&quot; &quot;482 952 3315&quot; &quot;239 923 8115&quot; ## [10] &quot;842 566 4692&quot; &quot;579-499-7527&quot; NA ## [13] &quot;543.355.3679&quot; #&gt; [1] &quot;219 733 8965&quot; &quot;329-293-8753&quot; NA &quot;595 794 7569&quot; #&gt; [5] &quot;387 287 6718&quot; NA &quot;233.398.9187&quot; &quot;482 952 3315&quot; #&gt; [9] &quot;239 923 8115&quot; &quot;842 566 4692&quot; &quot;579-499-7527&quot; NA #&gt; [13] &quot;543.355.3679&quot; str_match(strings, phone) ## [,1] [,2] [,3] [,4] ## [1,] &quot;219 733 8965&quot; &quot;219&quot; &quot;733&quot; &quot;8965&quot; ## [2,] &quot;329-293-8753&quot; &quot;329&quot; &quot;293&quot; &quot;8753&quot; ## [3,] NA NA NA NA ## [4,] &quot;595 794 7569&quot; &quot;595&quot; &quot;794&quot; &quot;7569&quot; ## [5,] &quot;387 287 6718&quot; &quot;387&quot; &quot;287&quot; &quot;6718&quot; ## [6,] NA NA NA NA ## [7,] &quot;233.398.9187&quot; &quot;233&quot; &quot;398&quot; &quot;9187&quot; ## [8,] &quot;482 952 3315&quot; &quot;482&quot; &quot;952&quot; &quot;3315&quot; ## [9,] &quot;239 923 8115&quot; &quot;239&quot; &quot;923&quot; &quot;8115&quot; ## [10,] &quot;842 566 4692&quot; &quot;842&quot; &quot;566&quot; &quot;4692&quot; ## [11,] &quot;579-499-7527&quot; &quot;579&quot; &quot;499&quot; &quot;7527&quot; ## [12,] NA NA NA NA ## [13,] &quot;543.355.3679&quot; &quot;543&quot; &quot;355&quot; &quot;3679&quot; #&gt; [,1] [,2] [,3] [,4] #&gt; [1,] &quot;219 733 8965&quot; &quot;219&quot; &quot;733&quot; &quot;8965&quot; #&gt; [2,] &quot;329-293-8753&quot; &quot;329&quot; &quot;293&quot; &quot;8753&quot; #&gt; [3,] NA NA NA NA #&gt; [4,] &quot;595 794 7569&quot; &quot;595&quot; &quot;794&quot; &quot;7569&quot; #&gt; [5,] &quot;387 287 6718&quot; &quot;387&quot; &quot;287&quot; &quot;6718&quot; #&gt; [6,] NA NA NA NA #&gt; [7,] &quot;233.398.9187&quot; &quot;233&quot; &quot;398&quot; &quot;9187&quot; #&gt; [8,] &quot;482 952 3315&quot; &quot;482&quot; &quot;952&quot; &quot;3315&quot; #&gt; [9,] &quot;239 923 8115&quot; &quot;239&quot; &quot;923&quot; &quot;8115&quot; #&gt; [10,] &quot;842 566 4692&quot; &quot;842&quot; &quot;566&quot; &quot;4692&quot; #&gt; [11,] &quot;579-499-7527&quot; &quot;579&quot; &quot;499&quot; &quot;7527&quot; #&gt; [12,] NA NA NA NA #&gt; [13,] &quot;543.355.3679&quot; &quot;543&quot; &quot;355&quot; &quot;3679&quot; #10)str_replace(string, pattern, replacement) #매치되지 않은 부분은 그대로 두고 매치된 부분만 치환하는 함수 #base::sub(매치할 부분,치환할 문자,문자열)와 같은 기능을 합니다. fruits &lt;- c(&quot;one apple&quot;, &quot;two pears&quot;, &quot;three bananas&quot;) str_replace(fruits, &quot;[aeiou]&quot;, &quot;-&quot;) ## [1] &quot;-ne apple&quot; &quot;tw- pears&quot; &quot;thr-e bananas&quot; #&gt; [1] &quot;-ne apple&quot; &quot;tw- pears&quot; &quot;thr-e bananas&quot; str_replace_all(fruits, &quot;[aeiou]&quot;, &quot;-&quot;) ## [1] &quot;-n- -ppl-&quot; &quot;tw- p--rs&quot; &quot;thr-- b-n-n-s&quot; #&gt; [1] &quot;-n- -ppl-&quot; &quot;tw- p--rs&quot; &quot;thr-- b-n-n-s&quot; #11)str_trim(string, side=&quot;both&quot;) #공백문자를 제거하는 함수 str_trim(&quot; fruits &quot;, side=&quot;both&quot;) ## [1] &quot;fruits&quot; #&gt;[1] &quot;fruits&quot; Trim = function(x) gsub(&quot;^\\\\s+|\\\\s+$&quot;, &quot;&quot;, x) Trim(&quot; fruits &quot;) ## [1] &quot;fruits&quot; #&gt;[1] &quot;fruits&quot; #&quot;lubridate&quot; #lubri:lubricate(기름을 치다, 기름을 바르다, 원활히 하다)+date #Lubridate is an R package that makes it easier to work with dates and times #1.Installation install.packages(&quot;lubridate&quot;) ## Installing package into &#39;C:/Users/mdlhs/Rlib&#39; ## (as &#39;lib&#39; is unspecified) ## Error in contrib.url(repos, &quot;source&quot;): trying to use CRAN without setting a mirror library(lubridate) ## Loading required package: methods ## ## Attaching package: &#39;lubridate&#39; ## The following object is masked from &#39;package:base&#39;: ## ## date #2.Functions #1)Parsing dates and times(dates &amp; times 객체 만들기) ##Date #Base R as.Date(&quot;2011-06-04&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; as.Date(&quot;2011-6-4&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; as.Date(&quot;2011/06/04&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; ## as.Date(&quot;20110604&quot;) # error ## Error in charToDate(x): character string is not in a standard unambiguous format as.Date(&quot;06-04-2011&quot;) ### [1] &quot;0006-04-20&quot; (미국식 표현) #Problem ## [1] &quot;0006-04-20&quot; #lubridate package ymd(&quot;2011/06/04&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; #심볼의 순서를 바꾸어도 mdy(&quot;06/04/2011&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; dmy(&quot;04/06/2011&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; #lubridate에서의 날짜 양식의 관용 #heterogeneous format(불균일한 양식)에 대한 다양한 준비들이 되어있음 ymd(&quot;2011/06/04&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; ymd(&quot;2011-06-04&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; ymd(&quot;20110604&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; ymd(&quot;110604&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; ymd(&quot;11.06.04&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; ymd(&quot;11,06,04&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; ymd(&quot;11_06.04&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; ymd(&quot;2011 06 04&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; ymd(&quot;2011!?06??!04&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; ymd(&quot;2011 =06??04&quot;) ## [1] &quot;2011-06-04&quot; ## [1] &quot;2011-06-04&quot; ##Dates + Times 객체 만들기 #Base R as.POSIXct(&quot;2011-06-04 13:30:50&quot;) ## [1] &quot;2011-06-04 13:30:50 KST&quot; ## [1] &quot;2011-06-04 13:30:50 KST&quot; as.POSIXct(&quot;2011-06-04 13&quot;) # No ## [1] &quot;2011-06-04 KST&quot; ## [1] &quot;2011-06-04 KST&quot; strptime(&quot;2011-06-04 13:30:50&quot;, &quot;%Y-%m-%d %H:%M:%S&quot;) ## [1] &quot;2011-06-04 13:30:50 KST&quot; ## [1] &quot;2011-06-04 13:30:50 KST&quot; #lubridate package ymd_hms(&quot;2011-06-04 13:30:50&quot;) ## [1] &quot;2011-06-04 13:30:50 UTC&quot; ## [1] &quot;2011-06-04 13:30:50 UTC&quot; #조금 더 융통성이 있게 사용할 수 있는 점 ymd_h(&quot;2011-06-04 13&quot;) ## [1] &quot;2011-06-04 13:00:00 UTC&quot; ## [1] &quot;2011-06-04 13:00:00 UTC&quot; #2)Setting and Extracting information #부분정보를 추출하기 위한 간편 함수들 #함수명칭도 상식적으로 이해하기 쉬운 것들 #:second(), minute(), hour(), day(), wday(), yday(), week(), month(), year() ld1 &lt;- ymd_hms(&quot;2011-06-04 13:30:50&quot;) year(ld1) ## [1] 2011 ## [1] 2011 month(ld1) ## [1] 6 ## [1] 6 day(ld1) ## [1] 4 ## [1] 4 wday(ld1) ## [1] 7 ## [1] 7 yday(ld1) ## [1] 155 ## [1] 155 hour(ld1) ## [1] 13 ## [1] 13 minute(ld1) ## [1] 30 ## [1] 30 second(ld1) ## [1] 50 ## [1] 50 # month, wday 의 경우 label 인자를 가지고 있는데 이를 TRUE 로 설정할 경우 month(ld1, label = T) ## [1] 6 ## 12 Levels: 1 &lt; 2 &lt; 3 &lt; 4 &lt; 5 &lt; 6 &lt; 7 &lt; 8 &lt; ... &lt; 12 ## [1] Jun ## 12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec wday(ld1, label = T) ## [1] 토 ## Levels: 일 &lt; 월 &lt; 화 &lt; 수 &lt; 목 &lt; 금 &lt; 토 ## [1] Sat ## Levels: Sun &lt; Mon &lt; Tues &lt; Wed &lt; Thurs &lt; Fri &lt; Sat #3)Update date-time #&quot;2011년 6월 4일 13:30:50&quot; 로 저장되어있던 ld1 에 대해 시각(hour)을 10시로 바꾸려면 hour(ld1) &lt;- 10 ld1 ## [1] &quot;2011-06-04 10:30:50 UTC&quot; ## [1] &quot;2011-06-04 10:30:50 UTC&quot; #update() 함수를 이용해 10시로 변경된 ld1 을 다시 13로 ld1 &lt;- update(ld1, hour = 13) ld1 ## [1] &quot;2011-06-04 13:30:50 UTC&quot; ## [1] &quot;2011-06-04 13:30:50 UTC&quot; #4) Arithmetic with date times #lubridate 와 같은 패키지를 공부하는 목적 중 가장 중요한 특징 #산술연산에서 사용할 수 있는 패밀리:간편함수마지막에 &quot;s&quot; 가 붙음으로써 쓰임이 달라진 것 #days(), seconds(), minutes(), hours(), weeks(), years(), milliseconds(), microseconds(), nanoseconds(), picoseconds() ymd(&quot;2016-01-30&quot;) + days(2) ## [1] &quot;2016-02-01&quot; ## [1] &quot;2016-02-01&quot; ymd(&quot;2016-01-30&quot;) - days(1:30) ## [1] &quot;2016-01-29&quot; &quot;2016-01-28&quot; &quot;2016-01-27&quot; ## [4] &quot;2016-01-26&quot; &quot;2016-01-25&quot; &quot;2016-01-24&quot; ## [7] &quot;2016-01-23&quot; &quot;2016-01-22&quot; &quot;2016-01-21&quot; ## [10] &quot;2016-01-20&quot; &quot;2016-01-19&quot; &quot;2016-01-18&quot; ## [13] &quot;2016-01-17&quot; &quot;2016-01-16&quot; &quot;2016-01-15&quot; ## [16] &quot;2016-01-14&quot; &quot;2016-01-13&quot; &quot;2016-01-12&quot; ## [19] &quot;2016-01-11&quot; &quot;2016-01-10&quot; &quot;2016-01-09&quot; ## [22] &quot;2016-01-08&quot; &quot;2016-01-07&quot; &quot;2016-01-06&quot; ## [25] &quot;2016-01-05&quot; &quot;2016-01-04&quot; &quot;2016-01-03&quot; ## [28] &quot;2016-01-02&quot; &quot;2016-01-01&quot; &quot;2015-12-31&quot; ## [1] &quot;2016-01-29&quot; &quot;2016-01-28&quot; &quot;2016-01-27&quot; &quot;2016-01-26&quot; &quot;2016-01-25&quot; ## [6] &quot;2016-01-24&quot; &quot;2016-01-23&quot; &quot;2016-01-22&quot; &quot;2016-01-21&quot; &quot;2016-01-20&quot; ## [11] &quot;2016-01-19&quot; &quot;2016-01-18&quot; &quot;2016-01-17&quot; &quot;2016-01-16&quot; &quot;2016-01-15&quot; ## [16] &quot;2016-01-14&quot; &quot;2016-01-13&quot; &quot;2016-01-12&quot; &quot;2016-01-11&quot; &quot;2016-01-10&quot; ## [21] &quot;2016-01-09&quot; &quot;2016-01-08&quot; &quot;2016-01-07&quot; &quot;2016-01-06&quot; &quot;2016-01-05&quot; ## [26] &quot;2016-01-04&quot; &quot;2016-01-03&quot; &quot;2016-01-02&quot; &quot;2016-01-01&quot; &quot;2015-12-31&quot; ymd(&quot;2013-01-31&quot;) + months(0:11) ## [1] &quot;2013-01-31&quot; NA &quot;2013-03-31&quot; ## [4] NA &quot;2013-05-31&quot; NA ## [7] &quot;2013-07-31&quot; &quot;2013-08-31&quot; NA ## [10] &quot;2013-10-31&quot; NA &quot;2013-12-31&quot; ## [1] &quot;2013-01-31&quot; NA &quot;2013-03-31&quot; NA &quot;2013-05-31&quot; ## [6] NA &quot;2013-07-31&quot; &quot;2013-08-31&quot; NA &quot;2013-10-31&quot; ## [11] NA &quot;2013-12-31&quot; #5) Application with lubridate and dplyr #lubridate package 에 내장된 데이터셋 lakers 를 이용 #data(lakers) sessionInfo() ## R version 3.4.3 (2017-11-30) ## Platform: x86_64-w64-mingw32/x64 (64-bit) ## Running under: Windows 7 x64 (build 7601) Service Pack 1 ## ## Matrix products: default ## ## locale: ## [1] LC_COLLATE=Korean_Korea.949 ## [2] LC_CTYPE=Korean_Korea.949 ## [3] LC_MONETARY=Korean_Korea.949 ## [4] LC_NUMERIC=C ## [5] LC_TIME=Korean_Korea.949 ## ## attached base packages: ## [1] methods stats graphics grDevices utils ## [6] datasets base ## ## other attached packages: ## [1] lubridate_1.7.1 stringr_1.2.0 lattice_0.20-35 ## [4] gdtools_0.1.6 dplyr_0.7.4.9000 readxl_1.0.0 ## [7] knitr_1.17.20 ## ## loaded via a namespace (and not attached): ## [1] Rcpp_0.12.14 rstudioapi_0.7 bindr_0.1 ## [4] magrittr_1.5 tidyselect_0.2.3 R6_2.2.2 ## [7] rlang_0.1.4 tools_3.4.3 grid_3.4.3 ## [10] htmltools_0.3.6 yaml_2.1.16 rprojroot_1.3-1 ## [13] digest_0.6.13 assertthat_0.2.0 tibble_1.3.4 ## [16] bookdown_0.5.10 bindrcpp_0.2 purrr_0.2.4.9000 ## [19] glue_1.2.0 evaluate_0.10.1 rmarkdown_1.8.3 ## [22] stringi_1.1.6 compiler_3.4.3 cellranger_1.1.0 ## [25] backports_1.1.2 svglite_1.2.1 pkgconfig_2.0.1 lakers &lt;- lakers %&gt;% tbl_df lakers #--&gt; date, time 변수가 서로 나뉘어 있다. ## # A tibble: 34,624 x 13 ## date opponent game_type time period etype ## &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; ## 1 20081028 POR home 12:00 1 jump ball ## 2 20081028 POR home 11:39 1 shot ## 3 20081028 POR home 11:37 1 rebound ## 4 20081028 POR home 11:25 1 shot ## 5 20081028 POR home 11:23 1 rebound ## 6 20081028 POR home 11:22 1 shot ## 7 20081028 POR home 11:22 1 foul ## 8 20081028 POR home 11:22 1 free throw ## 9 20081028 POR home 11:00 1 foul ## 10 20081028 POR home 10:53 1 shot ## # ... with 34,614 more rows, and 7 more variables: ## # team &lt;chr&gt;, player &lt;chr&gt;, result &lt;chr&gt;, ## # points &lt;int&gt;, type &lt;chr&gt;, x &lt;int&gt;, y &lt;int&gt; ## # A tibble: 34,624 &lt;U+00D7&gt; 13 ## date opponent game_type time period etype team ## &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; ## 1 20081028 POR home 12:00 1 jump ball OFF ## 2 20081028 POR home 11:39 1 shot LAL ## 3 20081028 POR home 11:37 1 rebound LAL ## 4 20081028 POR home 11:25 1 shot LAL ## 5 20081028 POR home 11:23 1 rebound LAL ## 6 20081028 POR home 11:22 1 shot LAL ## 7 20081028 POR home 11:22 1 foul POR ## 8 20081028 POR home 11:22 1 free throw LAL ## 9 20081028 POR home 11:00 1 foul LAL ## 10 20081028 POR home 10:53 1 shot POR ## # ... with 34,614 more rows, and 6 more variables: player &lt;chr&gt;, ## # result &lt;chr&gt;, points &lt;int&gt;, type &lt;chr&gt;, x &lt;int&gt;, y &lt;int&gt; lakers &lt;- lakers %&gt;% mutate(date = paste(date, time) %&gt;% ymd_hm) %&gt;% dplyr::rename(time_index = date) %&gt;% select(-time) #date, time 두변수를 붙인 문자열에 대해 ymd_hm() 함수로 넘긴 후 #time_index 라는 변수에 담고, #date, time 두 변수를 제외한 것이다. lakers ## # A tibble: 34,624 x 12 ## time_index opponent game_type period ## &lt;dttm&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; ## 1 2008-10-28 12:00:00 POR home 1 ## 2 2008-10-28 11:39:00 POR home 1 ## 3 2008-10-28 11:37:00 POR home 1 ## 4 2008-10-28 11:25:00 POR home 1 ## 5 2008-10-28 11:23:00 POR home 1 ## 6 2008-10-28 11:22:00 POR home 1 ## 7 2008-10-28 11:22:00 POR home 1 ## 8 2008-10-28 11:22:00 POR home 1 ## 9 2008-10-28 11:00:00 POR home 1 ## 10 2008-10-28 10:53:00 POR home 1 ## # ... with 34,614 more rows, and 8 more variables: ## # etype &lt;chr&gt;, team &lt;chr&gt;, player &lt;chr&gt;, ## # result &lt;chr&gt;, points &lt;int&gt;, type &lt;chr&gt;, x &lt;int&gt;, ## # y &lt;int&gt; ## # A tibble: 34,624 &lt;U+00D7&gt; 12 ## time_index opponent game_type period etype team ## &lt;dttm&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; ## 1 2008-10-28 12:00:00 POR home 1 jump ball OFF ## 2 2008-10-28 11:39:00 POR home 1 shot LAL ## 3 2008-10-28 11:37:00 POR home 1 rebound LAL ## 4 2008-10-28 11:25:00 POR home 1 shot LAL ## 5 2008-10-28 11:23:00 POR home 1 rebound LAL ## 6 2008-10-28 11:22:00 POR home 1 shot LAL ## 7 2008-10-28 11:22:00 POR home 1 foul POR ## 8 2008-10-28 11:22:00 POR home 1 free throw LAL ## 9 2008-10-28 11:00:00 POR home 1 foul LAL ## 10 2008-10-28 10:53:00 POR home 1 shot POR ## # ... with 34,614 more rows, and 6 more variables: player &lt;chr&gt;, ## # result &lt;chr&gt;, points &lt;int&gt;, type &lt;chr&gt;, x &lt;int&gt;, y &lt;int&gt; #Using &quot;group by&quot; 월별 평균을 x, y 변수에 대해서 계산:month() 함수를 이용cf) 연별 평균을 계산하고 싶다면 year() 이용 lakers %&gt;% group_by(month(time_index)) %&gt;% summarize(mean_x = mean(x, na.rm = T), mean_y = mean(y, na.rm = T)) ## # A tibble: 7 x 3 ## `month(time_index)` mean_x mean_y ## &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 1 25.49 13.89 ## 2 2 25.02 13.17 ## 3 3 25.52 13.21 ## 4 4 25.38 13.46 ## 5 10 24.92 13.12 ## 6 11 25.47 13.37 ## 7 12 25.06 13.48 ## # A tibble: 7 &lt;U+00D7&gt; 3 ## `month(time_index)` mean_x mean_y ## &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 1 25.49382 13.89279 ## 2 2 25.01759 13.17499 ## 3 3 25.51587 13.20571 ## 4 4 25.38344 13.46396 ## 5 10 24.92188 13.12500 ## 6 11 25.47463 13.36926 ## 7 12 25.05895 13.48262 #Using &quot;filter&quot; &quot;2008-10-28 12:00:00&quot; 이전의 기간을 서브세팅 lakers %&gt;% filter(time_index &lt;= ymd_hms(&quot;2008-10-28 12:00:00&quot;)) ## # A tibble: 416 x 12 ## time_index opponent game_type period ## &lt;dttm&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; ## 1 2008-10-28 12:00:00 POR home 1 ## 2 2008-10-28 11:39:00 POR home 1 ## 3 2008-10-28 11:37:00 POR home 1 ## 4 2008-10-28 11:25:00 POR home 1 ## 5 2008-10-28 11:23:00 POR home 1 ## 6 2008-10-28 11:22:00 POR home 1 ## 7 2008-10-28 11:22:00 POR home 1 ## 8 2008-10-28 11:22:00 POR home 1 ## 9 2008-10-28 11:00:00 POR home 1 ## 10 2008-10-28 10:53:00 POR home 1 ## # ... with 406 more rows, and 8 more variables: ## # etype &lt;chr&gt;, team &lt;chr&gt;, player &lt;chr&gt;, ## # result &lt;chr&gt;, points &lt;int&gt;, type &lt;chr&gt;, x &lt;int&gt;, ## # y &lt;int&gt; ## # A tibble: 416 &lt;U+00D7&gt; 12 ## time_index opponent game_type period etype team ## &lt;dttm&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; ## 1 2008-10-28 12:00:00 POR home 1 jump ball OFF ## 2 2008-10-28 11:39:00 POR home 1 shot LAL ## 3 2008-10-28 11:37:00 POR home 1 rebound LAL ## 4 2008-10-28 11:25:00 POR home 1 shot LAL ## 5 2008-10-28 11:23:00 POR home 1 rebound LAL ## 6 2008-10-28 11:22:00 POR home 1 shot LAL ## 7 2008-10-28 11:22:00 POR home 1 foul POR ## 8 2008-10-28 11:22:00 POR home 1 free throw LAL ## 9 2008-10-28 11:00:00 POR home 1 foul LAL ## 10 2008-10-28 10:53:00 POR home 1 shot POR ## # ... with 406 more rows, and 6 more variables: player &lt;chr&gt;, ## # result &lt;chr&gt;, points &lt;int&gt;, type &lt;chr&gt;, x &lt;int&gt;, y &lt;int&gt; # &quot;2008-10-28 12:00:00&quot; ~ &quot;2009-03-09 00:33:00&quot; 의 기간에 대해서 서브세팅 lakers %&gt;% filter(time_index &gt;= ymd_hms(&quot;2008-10-28 12:00:00&quot;), time_index &lt;= ymd_hms(&quot;2009-03-09 00:33:00&quot;)) ## # A tibble: 25,554 x 12 ## time_index opponent game_type period ## &lt;dttm&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; ## 1 2008-10-28 12:00:00 POR home 1 ## 2 2008-10-29 12:00:00 LAC away 1 ## 3 2008-10-29 11:36:00 LAC away 1 ## 4 2008-10-29 11:24:00 LAC away 1 ## 5 2008-10-29 11:24:00 LAC away 1 ## 6 2008-10-29 11:08:00 LAC away 1 ## 7 2008-10-29 10:58:00 LAC away 1 ## 8 2008-10-29 10:57:00 LAC away 1 ## 9 2008-10-29 10:41:00 LAC away 1 ## 10 2008-10-29 10:40:00 LAC away 1 ## # ... with 25,544 more rows, and 8 more variables: ## # etype &lt;chr&gt;, team &lt;chr&gt;, player &lt;chr&gt;, ## # result &lt;chr&gt;, points &lt;int&gt;, type &lt;chr&gt;, x &lt;int&gt;, ## # y &lt;int&gt; #interval() 함수와 %within% 연산자를 이용하면 조금 더 직관적인 서브세팅(interval() 함수대신 %--% 연산자를 써도 된다) inter &lt;- interval(ymd_hms(&quot;2008-10-28 12:00:00&quot;), ymd_hms(&quot;2009-03-09 00:33:00&quot;)) lakers %&gt;% filter(time_index %within% inter) ## # A tibble: 25,554 x 12 ## time_index opponent game_type period ## &lt;dttm&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; ## 1 2008-10-28 12:00:00 POR home 1 ## 2 2008-10-29 12:00:00 LAC away 1 ## 3 2008-10-29 11:36:00 LAC away 1 ## 4 2008-10-29 11:24:00 LAC away 1 ## 5 2008-10-29 11:24:00 LAC away 1 ## 6 2008-10-29 11:08:00 LAC away 1 ## 7 2008-10-29 10:58:00 LAC away 1 ## 8 2008-10-29 10:57:00 LAC away 1 ## 9 2008-10-29 10:41:00 LAC away 1 ## 10 2008-10-29 10:40:00 LAC away 1 ## # ... with 25,544 more rows, and 8 more variables: ## # etype &lt;chr&gt;, team &lt;chr&gt;, player &lt;chr&gt;, ## # result &lt;chr&gt;, points &lt;int&gt;, type &lt;chr&gt;, x &lt;int&gt;, ## # y &lt;int&gt; ## # A tibble: 25,554 &lt;U+00D7&gt; 12 ## time_index opponent game_type period etype team ## &lt;dttm&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; ## 1 2008-10-28 12:00:00 POR home 1 jump ball OFF ## 2 2008-10-29 12:00:00 LAC away 1 jump ball OFF ## 3 2008-10-29 11:36:00 LAC away 1 shot LAL ## 4 2008-10-29 11:24:00 LAC away 1 shot LAC ## 5 2008-10-29 11:24:00 LAC away 1 rebound LAL ## 6 2008-10-29 11:08:00 LAC away 1 shot LAL ## 7 2008-10-29 10:58:00 LAC away 1 shot LAC ## 8 2008-10-29 10:57:00 LAC away 1 rebound LAL ## 9 2008-10-29 10:41:00 LAC away 1 shot LAL ## 10 2008-10-29 10:40:00 LAC away 1 rebound LAC ## # ... with 25,544 more rows, and 6 more variables: player &lt;chr&gt;, ## # result &lt;chr&gt;, points &lt;int&gt;, type &lt;chr&gt;, x &lt;int&gt;, y &lt;int&gt; "],
["ggplot2.html", "Chapter 6 Rstudio and some useful packages 2 - ggplot2 6.1 Part1 6.2 Part2 6.3 Part3 6.4 Part4", " Chapter 6 Rstudio and some useful packages 2 - ggplot2 2017-05-10 한성필 전공의 강의 9주차 강의 자료입니다. Rstudio는 R을 좀더 편리하고 풍부하게 사용하기 위한 도구로서 가장 널리 사용되고 있는 IDE입니다. https://www.rstudio.com/products/rstudio/download 에서 가장 최신의 Rstudio를 다운로드 받을 수 있습니다. Windows, MacOS, Devian/Redhat Linux 중 운영체제에 맞는 것을 설치하면 됩니다. 아울러 이번 강의 에서는 ggplot2의 사용법을 예제를 통해 알아보겠습니다. (Wickham and Chang 2016) https://rpubs.com/kimwoohyung/ggplot2의 자료를 많이 참고하였습니다. https://rpubs.com/mccannecology/53464도 좋은 자료입니다. library(ggplot2) library(gcookbook) ## Error in library(gcookbook): there is no package called &#39;gcookbook&#39; library(plyr) library(reshape2) 6.1 Part1 tophit &lt;- tophitters2001[1:25,] ## Error in eval(expr, envir, enclos): 객체 &#39;tophitters2001&#39;를 찾을 수 없습니다 tophit &lt;- tophit[,c(&quot;name&quot;, &quot;lg&quot;, &quot;avg&quot;)] ## Error in eval(expr, envir, enclos): 객체 &#39;tophit&#39;를 찾을 수 없습니다 # y축 이산형 그래프 ggplot(tophit, aes(x = avg, y = name, col=lg)) + geom_point() ## Error in ggplot(tophit, aes(x = avg, y = name, col = lg)): 객체 &#39;tophit&#39;를 찾을 수 없습니다 # 그래프 정렬하기 &amp; 그래프 격자 없애기 &amp; 수평선 점선으로 바꾸기 ggplot(tophit, aes(x = avg, y = reorder(name, avg))) + geom_point(size = 3) + theme_bw() + theme(panel.grid.major.x = element_blank(), panel.grid.minor.x = element_blank(), panel.grid.major.y = element_line(color = &quot;grey60&quot;, linetype = &quot;dashed&quot;)) ## Error in ggplot(tophit, aes(x = avg, y = reorder(name, avg))): 객체 &#39;tophit&#39;를 찾을 수 없습니다 # x, y축 바꿔서 그치기 &amp; 그래프 격자 없애기 &amp; 수직선 점선으로 바꾸기 &amp; X축 값 정의 및 회전 ggplot(tophit, aes(x = reorder(name, avg), y = avg)) + geom_point(size = 3) + theme_bw() + theme(axis.text.x = element_text(angle = 60, hjust = 1), panel.grid.major.y = element_blank(), panel.grid.minor.y = element_blank(), panel.grid.major.x = element_line(color = &quot;grey60&quot;, linetype = &quot;dashed&quot;)) ## Error in ggplot(tophit, aes(x = reorder(name, avg), y = avg)): 객체 &#39;tophit&#39;를 찾을 수 없습니다 # 두개 변수로 정의하여 그리기 nameorder &lt;- tophit$name[order(tophit$lg, tophit$avg)] ## Error in eval(expr, envir, enclos): 객체 &#39;tophit&#39;를 찾을 수 없습니다 tophit$name &lt;- factor(tophit$name, levels = nameorder) ## Error in factor(tophit$name, levels = nameorder): 객체 &#39;tophit&#39;를 찾을 수 없습니다 # 격자 선이 그래프의 끝에서 끝까지 횡단하지 않고, 점까지만 가도록 표현 [ geom_segment ] ggplot(tophit, aes(x = avg, y = name)) + geom_segment(aes(yend = name), xend = 0, color = &quot;grey50&quot;) + geom_point(size = 3, aes(color = lg)) + scale_color_brewer(palette = &quot;Set1&quot;, limits = c(&quot;NL&quot;, &quot;AL&quot;)) + theme_bw() + theme(panel.grid.major.y = element_blank(), legend.position = c(1, 0.55), # 범례를 그래프 안쪽으로 옮김 legend.justification = c(1, 0.5)) ## Error in ggplot(tophit, aes(x = avg, y = name)): 객체 &#39;tophit&#39;를 찾을 수 없습니다 # 그룹 별 그래프 분할 ggplot(tophit, aes(x = avg, y = name)) + geom_segment(aes(yend = name), xend = 0, color = &quot;grey50&quot;) + geom_point(size = 5, aes(color = lg)) + scale_color_brewer(palette = &quot;Set1&quot;, limits = c(&quot;NL&quot;, &quot;AL&quot;), guide = FALSE) + theme_bw() + theme(panel.grid.major.y = element_blank()) + facet_grid(lg ~ ., scales = &quot;free_y&quot;, space = &quot;free_y&quot;) ## Error in ggplot(tophit, aes(x = avg, y = name)): 객체 &#39;tophit&#39;를 찾을 수 없습니다 # 그룹 별 데이터 구별 # 색상기준 ggplot(heightweight, aes(x = ageYear, y = heightIn, color = sex)) + geom_point() ## Error in ggplot(heightweight, aes(x = ageYear, y = heightIn, color = sex)): 객체 &#39;heightweight&#39;를 찾을 수 없습니다 # 점 모양 기준 ggplot(heightweight, aes(x = ageYear, y = heightIn, shape = sex)) + geom_point() ## Error in ggplot(heightweight, aes(x = ageYear, y = heightIn, shape = sex)): 객체 &#39;heightweight&#39;를 찾을 수 없습니다 ggplot(heightweight, aes(x = ageYear, y = heightIn, color = sex, shape = sex)) + geom_point() + scale_shape_manual(values = c(1,2)) + scale_color_brewer(palette = &quot;Set1&quot;) ## Error in ggplot(heightweight, aes(x = ageYear, y = heightIn, color = sex, : 객체 &#39;heightweight&#39;를 찾을 수 없습니다 ggplot(heightweight, aes(x = ageYear, y = heightIn, color = sex, shape = sex)) + geom_point() + scale_shape_manual(values = c(3,2)) + scale_color_brewer(palette = &quot;Set1&quot;) ## Error in ggplot(heightweight, aes(x = ageYear, y = heightIn, color = sex, : 객체 &#39;heightweight&#39;를 찾을 수 없습니다 # 기준 정의에 따라 구별 hw &lt;-heightweight ## Error in eval(expr, envir, enclos): 객체 &#39;heightweight&#39;를 찾을 수 없습니다 hw$weightGroup &lt;- cut(hw$weightLb, breaks = c(-Inf, 100, Inf), labels = c(&quot;&lt; 100&quot;, &quot;&gt;= 100&quot;)) ## Error in cut(hw$weightLb, breaks = c(-Inf, 100, Inf), labels = c(&quot;&lt; 100&quot;, : 객체 &#39;hw&#39;를 찾을 수 없습니다 # x축이 이산형일 때 점들을 랜덤하게 조금식 이동시켜 표현 ggplot(ChickWeight, aes(x = Time, y = weight)) + geom_point() ggplot(ChickWeight, aes(x = Time, y = weight)) + geom_jitter() # 이동 적용 # 적합된 회귀선 추가하기 sp &lt;- ggplot(ChickWeight, aes(x = Time, y = weight)) sp + geom_point(color = &quot;blue&quot;) + stat_smooth(method = lm, se = TRUE, color = &quot;red&quot;) sp + geom_jitter(color = &quot;blue&quot;) + stat_smooth(method = lm, se = TRUE, color = &quot;red&quot;) #그룹 별 회귀선 추가하기 sps &lt;- ggplot(heightweight, aes(x = ageYear, y = heightIn, color = sex)) + geom_point() + scale_color_brewer(palette = &quot;Set1&quot;) ## Error in ggplot(heightweight, aes(x = ageYear, y = heightIn, color = sex)): 객체 &#39;heightweight&#39;를 찾을 수 없습니다 sps + geom_smooth() ## Error in eval(expr, envir, enclos): 객체 &#39;sps&#39;를 찾을 수 없습니다 # 예측값 실제값 그래프로 표현하기 (함수) predictvals &lt;- function(model, xvar, yvar, xrange = NULL, sample = 100, ...){ if(is.null(xrange)){ if(any(class(model) %in% c(&quot;lm&quot;, &quot;glm&quot;))) xrange &lt;- range(model$model[[xvar]]) else if(any(class(model) %in% &quot;loess&quot;)) xrange &lt;- range(model$x) } newdata &lt;- data.frame(x = seq(xrange[1], xrange[2], length.out = sample)) names(newdata) &lt;- xvar newdata[[yvar]] &lt;- predict(model, newdata = newdata, ...) newdata } modlinear &lt;- lm(heightIn ~ ageYear, heightweight) ## Error in is.data.frame(data): 객체 &#39;heightweight&#39;를 찾을 수 없습니다 modloess &lt;- loess(heightIn ~ ageYear, heightweight) ## Error in is.data.frame(data): 객체 &#39;heightweight&#39;를 찾을 수 없습니다 lm_predicted &lt;- predictvals(modlinear, &quot;ageYear&quot;, &quot;heightIn&quot;) ## Error in class(model) %in% c(&quot;lm&quot;, &quot;glm&quot;): 객체 &#39;modlinear&#39;를 찾을 수 없습니다 loess_predicted &lt;- predictvals(modloess, &quot;ageYear&quot;, &quot;heightIn&quot;) ## Error in class(model) %in% c(&quot;lm&quot;, &quot;glm&quot;): 객체 &#39;modloess&#39;를 찾을 수 없습니다 sp &lt;- ggplot(heightweight, aes(x = ageYear, y = heightIn)) + geom_point(color = &quot;grey40&quot;) ## Error in ggplot(heightweight, aes(x = ageYear, y = heightIn)): 객체 &#39;heightweight&#39;를 찾을 수 없습니다 sp + geom_line(data = lm_predicted, color = &quot;red&quot;, size = 0.8) + geom_line(data = loess_predicted, color = &quot;blue&quot;, size = 0.8) ## Error in fortify(data): 객체 &#39;lm_predicted&#39;를 찾을 수 없습니다 #산점도의 점에 라벨 붙이기 sp &lt;- ggplot(subset(countries, Year == 2009 &amp; healthexp &gt; 2000), aes(x = healthexp, y = infmortality)) + geom_point() ## Error in subset(countries, Year == 2009 &amp; healthexp &gt; 2000): 객체 &#39;countries&#39;를 찾을 수 없습니다 # 특정 값에 특정 단어로 라벨 붙이기 sp + annotate(&quot;text&quot;, x = 4350, y = 5.4, label = &quot;Canada&quot;) + annotate(&quot;text&quot;, x = 7400, y = 6.8, label = &quot;USA&quot;) # 데이터 값을 라벨로 붙이기 sp + geom_text(aes(label = Name), size = 4) ## Error in FUN(X[[i]], ...): 객체 &#39;Name&#39;를 찾을 수 없습니다 # 라벨의 위치를 데이터값보다 조금 크게 설정 sp + geom_text(aes(y = infmortality + 0.1, label = Name), size = 4, vjust = 0) ## Error in FUN(X[[i]], ...): 객체 &#39;infmortality&#39;를 찾을 수 없습니다 sp + geom_text(aes(x = healthexp + 100, label = Name), size = 4, hjust = 0) ## Error in FUN(X[[i]], ...): 객체 &#39;healthexp&#39;를 찾을 수 없습니다 # 특정 값만 라벨 붙이기 cdat &lt;- subset(countries, Year == 2009 &amp; healthexp &gt; 2000) ## Error in subset(countries, Year == 2009 &amp; healthexp &gt; 2000): 객체 &#39;countries&#39;를 찾을 수 없습니다 cdat$Name1 &lt;- cdat$Name ## Error in eval(expr, envir, enclos): 객체 &#39;cdat&#39;를 찾을 수 없습니다 idx &lt;- cdat$Name %in% c(&quot;Andorra&quot;, &quot;France&quot;, &quot;Canada&quot;) ## Error in cdat$Name %in% c(&quot;Andorra&quot;, &quot;France&quot;, &quot;Canada&quot;): 객체 &#39;cdat&#39;를 찾을 수 없습니다 cdat$Name1[!idx] &lt;- NA ## Error in cdat$Name1[!idx] &lt;- NA: 객체 &#39;cdat&#39;를 찾을 수 없습니다 ggplot(cdat, aes(x = healthexp, y = infmortality)) + geom_point() + geom_text(aes(y = infmortality + 0.1, label = Name1), size = 4, vjust = 0) ## Error in ggplot(cdat, aes(x = healthexp, y = infmortality)): 객체 &#39;cdat&#39;를 찾을 수 없습니다 ## Warning: Removed 24 rows containing missing values (geom_text). 6.2 Part2 # 거품그래프(balloon plot) hec &lt;- HairEyeColor[,,&quot;Male&quot;] + HairEyeColor[,,&quot;Female&quot;] hec &lt;- melt(hec, value.name = &quot;count&quot;) ggplot(hec, aes(x = Eye, y = Hair)) + geom_point(aes(size = count), shape = 21, color = &quot;black&quot;, fill = &quot;cornsilk&quot;) + scale_size_area(max_size = 20, guide = FALSE) + geom_text(aes(y = as.numeric(Hair)-sqrt(count)/22, label = count), vjust = 1, color = &quot;grey60&quot;, size = 4) # 산점도 행렬 만들기 c2009 &lt;- subset(countries, Year == 2009, select = c(Name, GDP, laborrate, healthexp, infmortality)) ## Error in subset(countries, Year == 2009, select = c(Name, GDP, laborrate, : 객체 &#39;countries&#39;를 찾을 수 없습니다 plot(c2009[,2:5]) ## Error in plot(c2009[, 2:5]): 객체 &#39;c2009&#39;를 찾을 수 없습니다 panel.hist &lt;- function(x, ...) { usr &lt;- par(&quot;usr&quot;); on.exit(par(usr)) par(usr = c(usr[1:2], 0, 1.5) ) h &lt;- hist(x, plot = FALSE) breaks &lt;- h$breaks; nB &lt;- length(breaks) y &lt;- h$counts; y &lt;- y/max(y) rect(breaks[-nB], 0, breaks[-1], y, col = &quot;cyan&quot;, ...) } panel.cor &lt;- function(x, y, digits = 2, prefix = &quot;&quot;, cex.cor, ...) { usr &lt;- par(&quot;usr&quot;); on.exit(par(usr)) par(usr = c(0, 1, 0, 1)) r &lt;- abs(cor(x, y)) txt &lt;- format(c(r, 0.123456789), digits = digits)[1] txt &lt;- paste0(prefix, txt) if(missing(cex.cor)) cex.cor &lt;- 0.8/strwidth(txt) text(0.5, 0.5, txt, cex = cex.cor * r) } panel.lm &lt;- function(x, y, col = par(&quot;col&quot;), bg = NA, pch = par(&quot;pch&quot;), cex = 1, col.smooth = &quot;black&quot;, ...){ points(x, y, pch = pch, col = col, bg = bg, cex = cex) abline(stats::lm(y ~ x), col = col.smooth, ...) } # 데이터에 대한 LOWESS선(평활선) 추가 pairs(c2009[,2:5], pch = &quot;.&quot;, upper.panel = panel.cor, diag.panel = panel.hist, lower.panel = panel.lm) ## Error in pairs(c2009[, 2:5], pch = &quot;.&quot;, upper.panel = panel.cor, diag.panel = panel.hist, : 객체 &#39;c2009&#39;를 찾을 수 없습니다 # 데이터에 대한 회귀적합선 추가 pairs(c2009[,2:5], pch = &quot;.&quot;, upper.panel = panel.cor, diag.panel = panel.hist, lower.panel = panel.smooth) ## Error in pairs(c2009[, 2:5], pch = &quot;.&quot;, upper.panel = panel.cor, diag.panel = panel.hist, : 객체 &#39;c2009&#39;를 찾을 수 없습니다 ###################################################################################### ## scatter + line plot (geom_point/ geom_line) ###################################################################################### plot(pressure$temperature, pressure$pressure, type = &quot;l&quot;) points(pressure$temperature, pressure$pressure) qplot(temperature, pressure, data = pressure, geom = c(&quot;line&quot;, &quot;point&quot;)) ggplot(pressure, aes(x = temperature, y = pressure)) + geom_point() + geom_line() ###################################################################################### ## line plot (geom_line) ###################################################################################### ggplot(BOD, aes(x = Time, y = demand)) + geom_line() + ylim(0, max(BOD$demand)) ggplot(BOD, aes(x = Time, y = demand)) + geom_line() + expand_limits(y = 0) ggplot(BOD, aes(x = Time, y = demand)) + geom_line() + geom_point() # 이산형 변수값에 따른 구분 tg &lt;- ddply(ToothGrowth, c(&quot;supp&quot;, &quot;dose&quot;), summarize, length = mean(len)) # 색상으로 구분 ggplot(tg, aes(x = dose, y = length, color = supp)) + geom_line() ggplot(tg, aes(x = factor(dose), y = length, color = supp, group = supp)) + geom_line() # group = supp 주의! : 이 명령문이 없으면 데이터를 어떻게 묶어서 그릴지 모름 # Line type으로 구분 ggplot(tg, aes(x = dose, y = length, linetype = supp)) + geom_line() # 점 형태로 구분 ggplot(tg, aes(x = dose, y = length, shape = supp)) + geom_line() + geom_point(size = 4) # 점 색상으로 구분 ggplot(tg, aes(x = dose, y = length, fill = supp)) + geom_line() + geom_point(size = 4, shape = 21) # 두 선이 겹칠때 하나의 선을 옆으로 이동시켜 표현 ggplot(tg, aes(x = dose, y = length, shape = supp)) + geom_line(position = position_dodge(0.1)) + geom_point(position = position_dodge(0.1), size = 4) # 선 형태 바꾸기 [ linetype ] ggplot(tg, aes(x = dose, y = length, color = supp)) + geom_line(linetype = &quot;dashed&quot;) + geom_point(shape = 22, size = 3, fill = &quot;white&quot;) 6.3 Part3 # 점 형태 바꾸기 [ shape ] ################################# pd &lt;- position_dodge(0.2) # ################################# ggplot(tg, aes(x = dose, y = length, fill = supp)) + geom_line(position = pd) + geom_point(shape = 21, size = 5, position = pd) + scale_fill_manual(values = c(&quot;black&quot;, &quot;white&quot;)) # sample Data sunspotyear &lt;- data.frame(Year = as.numeric(time(sunspot.year)), Sunspots = as.numeric(sunspot.year)) # 음영 영역 그래프 그리기 ggplot(sunspotyear, aes(x = Year, y = Sunspots)) + geom_area() # 음영 투명도 설정하기 [ alpha ] ggplot(sunspotyear, aes(x = Year, y = Sunspots)) + geom_area(color = &quot;black&quot;, fill = &quot;blue&quot;, alpha = 0.5) # 누적 영역 그래프 그리기 ggplot(uspopage, aes(x = Year, y = Thousands, fill = AgeGroup)) + geom_area() ## Error in ggplot(uspopage, aes(x = Year, y = Thousands, fill = AgeGroup)): 객체 &#39;uspopage&#39;를 찾을 수 없습니다 # 영역색상 그라데이션 넣기 ggplot(uspopage, aes(x = Year, y = Thousands, fill = AgeGroup)) + geom_area(color = &quot;black&quot;, size = 0.2, alpha = 0.4) + scale_fill_brewer(palette = &quot;Blues&quot;, breaks = rev(levels(uspopage$AgeGroup))) ## Error in ggplot(uspopage, aes(x = Year, y = Thousands, fill = AgeGroup)): 객체 &#39;uspopage&#39;를 찾을 수 없습니다 # 데이터 순서정렬하기 &amp; 양쪽 테두리 지우기 ggplot(uspopage, aes(x = Year, y = Thousands, fill = AgeGroup, order = desc(AgeGroup))) + geom_area(color = NA, alpha = 0.4) + scale_fill_brewer(palette = &quot;Blues&quot;) + geom_line(position = &quot;stack&quot;, size = 0.2) ## Error in ggplot(uspopage, aes(x = Year, y = Thousands, fill = AgeGroup, : 객체 &#39;uspopage&#39;를 찾을 수 없습니다 # 비율 누적 영역 그래프 그리기 uspopage_prop &lt;- ddply(uspopage, &quot;Year&quot;, transform, Percent = Thousands / sum(Thousands) * 100) ## Error in empty(.data): 객체 &#39;uspopage&#39;를 찾을 수 없습니다 ggplot(uspopage_prop, aes(x = Year, y = Percent, fill = AgeGroup)) + geom_area(color = &quot;black&quot;, size = 0.2, alpha = 0.4) + scale_fill_brewer(palette = &quot;Blues&quot;, breaks = rev(levels(uspopage$AgeGroup))) ## Error in ggplot(uspopage_prop, aes(x = Year, y = Percent, fill = AgeGroup)): 객체 &#39;uspopage_prop&#39;를 찾을 수 없습니다 # 그래프에 신뢰 영역 추가하기 clim &lt;- subset(climate, Source == &quot;Berkeley&quot;, select = c(&quot;Year&quot;, &quot;Anomaly10y&quot;, &quot;Unc10y&quot;)) ## Error in subset(climate, Source == &quot;Berkeley&quot;, select = c(&quot;Year&quot;, &quot;Anomaly10y&quot;, : 객체 &#39;climate&#39;를 찾을 수 없습니다 # 신뢰영역 음영으로 표현 ggplot(clim, aes(x = Year, y = Anomaly10y)) + geom_ribbon(aes(ymin = Anomaly10y - Unc10y, ymax = Anomaly10y + Unc10y), alpha = 0.2) + geom_line() ## Error in ggplot(clim, aes(x = Year, y = Anomaly10y)): 객체 &#39;clim&#39;를 찾을 수 없습니다 # 신뢰영역 점선으로 표현 ggplot(clim, aes(x = Year, y = Anomaly10y)) + geom_line(aes(y = Anomaly10y - Unc10y), linetype = &quot;dotted&quot;) + geom_line(aes(y = Anomaly10y + Unc10y), linetype = &quot;dotted&quot;) + geom_line() ## Error in ggplot(clim, aes(x = Year, y = Anomaly10y)): 객체 &#39;clim&#39;를 찾을 수 없습니다 # ###################################################################################### ## barplot (geom_bar) ###################################################################################### barplot(BOD$demand, names.arg = BOD$Time) barplot(table(mtcars$cyl)) # x값을 숫자로 인식 # qplot(BOD$Time, BOD$demand, geom = &quot;bar&quot;, stat = &quot;identity&quot;) ggplot(BOD, aes(x = Time, y = demand)) + geom_bar(stat = &quot;identity&quot;) # x값을 요인으로 변환 # qplot(as.factor(BOD$Time), BOD$demand, geom = &quot;bar&quot;, stat = &quot;identity&quot;) ggplot(BOD, aes(x = factor(Time), y = demand)) + geom_bar(stat = &quot;identity&quot;) # 막대 색상 채우기/테두리 설정하기 (fill : 채우기/ colour(or color) : 테두리) ggplot(pg_mean, aes(x = group, y = weight)) + geom_bar(stat = &quot;identity&quot;, fill = &quot;lightblue&quot;, colour = &quot;black&quot;) ## Error in ggplot(pg_mean, aes(x = group, y = weight)): 객체 &#39;pg_mean&#39;를 찾을 수 없습니다 # 막대 묶어서 표현하기(나누어 표현하고 싶은 변수를 색상으로 지정) ggplot(cabbage_exp, aes(x = Date, y = Weight, fill = Cultivar)) + geom_bar(stat = &quot;identity&quot;, position = &quot;dodge&quot;) ## Error in ggplot(cabbage_exp, aes(x = Date, y = Weight, fill = Cultivar)): 객체 &#39;cabbage_exp&#39;를 찾을 수 없습니다 # dodge : &quot;피하다&quot;라는 의미로 막대를 새로운 값을 기준으로 나누어 표현 ggplot(cabbage_exp, aes(x = Date, y = Weight, fill = Cultivar)) + geom_bar(stat = &quot;identity&quot;, position = &quot;dodge&quot;, color = &quot;black&quot;) + scale_fill_brewer(palette = &quot;Pastel1&quot;) ## Error in ggplot(cabbage_exp, aes(x = Date, y = Weight, fill = Cultivar)): 객체 &#39;cabbage_exp&#39;를 찾을 수 없습니다 6.4 Part4 # 빈도수 막대 그래프 그리기 # x가 이산형 ggplot(diamonds, aes(x = cut)) + geom_bar() # x가 연속형 ggplot(diamonds, aes(x = carat)) + geom_bar() # 막대 색상 넣기/ 축 이름 정의하기(reorder) upc &lt;- subset(uspopchange, rank(Change) &gt; 40) ## Error in subset(uspopchange, rank(Change) &gt; 40): 객체 &#39;uspopchange&#39;를 찾을 수 없습니다 ggplot(upc, aes(x = reorder(Abb, Change), y = Change, fill = Region)) + geom_bar(stat = &quot;identity&quot;, color = &quot;black&quot;) + scale_fill_manual(values = c(&quot;#669933&quot;, &quot;#FFCC66&quot;)) + xlab(&quot;State&quot;) ## Error in ggplot(upc, aes(x = reorder(Abb, Change), y = Change, fill = Region)): 객체 &#39;upc&#39;를 찾을 수 없습니다 # 양수/음수 다른 색상으로 표현 (구분 inde를 만들어 색상 변수로 지정) csub &lt;- subset(climate, Source == &quot;Berkeley&quot; &amp; Year &gt;= 1900 ) ## Error in subset(climate, Source == &quot;Berkeley&quot; &amp; Year &gt;= 1900): 객체 &#39;climate&#39;를 찾을 수 없습니다 csub$pos &lt;- csub$Anomaly10y &gt;= 0 ## Error in eval(expr, envir, enclos): 객체 &#39;csub&#39;를 찾을 수 없습니다 ggplot(csub, aes(x = Year, y = Anomaly10y, fill = pos)) + geom_bar(stat = &quot;identity&quot;, position = &quot;identity&quot;) ## Error in ggplot(csub, aes(x = Year, y = Anomaly10y, fill = pos)): 객체 &#39;csub&#39;를 찾을 수 없습니다 # 막대 그래프 테두리 두께 설정(size) / 범례 지우기(guide = FALSE) ggplot(csub, aes(x = Year, y = Anomaly10y, fill = pos)) + geom_bar(stat = &quot;identity&quot;, position = &quot;identity&quot;, color = &quot;black&quot;, size = 0.0001) + scale_fill_manual(values = c(&quot;#CCEEFF&quot;, &quot;#FFDDDD&quot;), guide = FALSE) ## Error in ggplot(csub, aes(x = Year, y = Anomaly10y, fill = pos)): 객체 &#39;csub&#39;를 찾을 수 없습니다 # 막대 너비/ 간격 조절하기(width : 최대 너비는 1) ggplot(pg_mean, aes(x = group, y = weight)) + geom_bar(stat = &quot;identity&quot;, width = 0.5) ## Error in ggplot(pg_mean, aes(x = group, y = weight)): 객체 &#39;pg_mean&#39;를 찾을 수 없습니다 # 막대 그룹 간의 간격 조절하기 (default : 0.9) ggplot(cabbage_exp, aes(x = Date, y = Weight, fill = Cultivar)) + geom_bar(stat = &quot;identity&quot;, width = 0.4, position = &quot;dodge&quot;) ## Error in ggplot(cabbage_exp, aes(x = Date, y = Weight, fill = Cultivar)): 객체 &#39;cabbage_exp&#39;를 찾을 수 없습니다 # 막대 그룹 내부간의 간격 조절 (default : 0.9) ggplot(cabbage_exp, aes(x = Date, y = Weight, fill = Cultivar)) + geom_bar(stat = &quot;identity&quot;, width = 0.3, position = position_dodge(0.5)) ## Error in ggplot(cabbage_exp, aes(x = Date, y = Weight, fill = Cultivar)): 객체 &#39;cabbage_exp&#39;를 찾을 수 없습니다 # 범례 순서 바꾸기 (reverse = TRUE) ggplot(cabbage_exp, aes(x = Date, y = Weight, fill = Cultivar)) + geom_bar(stat = &quot;identity&quot;) + guides(fill = guide_legend(reverse = TRUE)) ## Error in ggplot(cabbage_exp, aes(x = Date, y = Weight, fill = Cultivar)): 객체 &#39;cabbage_exp&#39;를 찾을 수 없습니다 # 막대 쌓는 순서 바꾸기 ggplot(cabbage_exp, aes(x = Date, y = Weight, fill = Cultivar, order = desc(Cultivar))) + geom_bar(stat = &quot;identity&quot;) ## Error in ggplot(cabbage_exp, aes(x = Date, y = Weight, fill = Cultivar, : 객체 &#39;cabbage_exp&#39;를 찾을 수 없습니다 # 비율 누적 막대 그래프 그리기(막대 전체가 100%가 되도록) ce &lt;- ddply(cabbage_exp, &quot;Date&quot;, transform, percent_weight = Weight / sum(Weight) * 100) ## Error in empty(.data): 객체 &#39;cabbage_exp&#39;를 찾을 수 없습니다 ggplot(ce, aes(x = Date, y = percent_weight, fill = Cultivar)) + geom_bar(stat = &quot;identity&quot;) ## Error in ggplot(ce, aes(x = Date, y = percent_weight, fill = Cultivar)): 객체 &#39;ce&#39;를 찾을 수 없습니다 # 막대에 라벨 추가하기 [ geom_text ] # 선 상단 [ vjust &lt; 0 ] ggplot(cabbage_exp, aes(x = interaction(Date, Cultivar), y = Weight)) + geom_bar(stat = &quot;identity&quot;) + geom_text(aes(label = Weight), vjust = -0.2) ## Error in ggplot(cabbage_exp, aes(x = interaction(Date, Cultivar), y = Weight)): 객체 &#39;cabbage_exp&#39;를 찾을 수 없습니다 # 선 하단 [ vjust &gt; 0 ] ggplot(cabbage_exp, aes(x = interaction(Date, Cultivar), y = Weight)) + geom_bar(stat = &quot;identity&quot;) + geom_text(aes(label = Weight), vjust = 1.5, color = &quot;white&quot;) ## Error in ggplot(cabbage_exp, aes(x = interaction(Date, Cultivar), y = Weight)): 객체 &#39;cabbage_exp&#39;를 찾을 수 없습니다 # 그래프 범위 설정 # max(데이터)로 지정 ggplot(cabbage_exp, aes(x = interaction(Date, Cultivar), y = Weight)) + geom_bar(stat = &quot;identity&quot;) + geom_text(aes(label = Weight), vjust = -0.2) + ylim(0, max(cabbage_exp$Weight) * 1.05) ## Error in ggplot(cabbage_exp, aes(x = interaction(Date, Cultivar), y = Weight)): 객체 &#39;cabbage_exp&#39;를 찾을 수 없습니다 # 막대의 상단보다 조금 높은 위치로 지정(데이터에 따라 자동 조정) ggplot(cabbage_exp, aes(x = interaction(Date, Cultivar), y = Weight)) + geom_bar(stat = &quot;identity&quot;) + geom_text(aes(y = Weight + 0.1, label = Weight)) ## Error in ggplot(cabbage_exp, aes(x = interaction(Date, Cultivar), y = Weight)): 객체 &#39;cabbage_exp&#39;를 찾을 수 없습니다 # 누적 합계 그래프 그리기 ce &lt;- arrange(cabbage_exp, Date, Cultivar) ## Error in is.data.frame(df): 객체 &#39;cabbage_exp&#39;를 찾을 수 없습니다 ce &lt;- ddply(ce, &quot;Date&quot;, transform, label = cumsum(Weight)) ## Error in empty(.data): 객체 &#39;ce&#39;를 찾을 수 없습니다 # ddply(data.frame, 그룹 기준 마지막 변수) ggplot(ce, aes(x = Date, y = Weight, fill = Cultivar)) + geom_bar(stat = &quot;identity&quot;, color = &quot;black&quot;) + geom_text(aes(y = label, label = paste(format(Weight, nsmall=2), &quot;kg&quot;)), size = 6, vjust = 1.5) + guides(fill = guide_legend(reverse = TRUE)) + scale_fill_brewer(palette = &quot;Pastel1&quot;) ## Error in ggplot(ce, aes(x = Date, y = Weight, fill = Cultivar)): 객체 &#39;ce&#39;를 찾을 수 없습니다 ###################################################################################### ## histogram (geom_histogram) ###################################################################################### hist(mtcars$mpg) # 상자(bin) 개수 지정 hist(mtcars$mpg, breaks = 10) qplot(mpg, data = mtcars, binwidth = 4) # ggplot(mtcars, aes(x = mpg)) + geom_histogram() ggplot(mtcars, aes(x = mpg)) + geom_histogram(binwidth = 4) h &lt;- ggplot(faithful, aes(x = waiting)) h + geom_histogram(binwidth = 8, fill = &quot;white&quot;, color = &quot;black&quot;, origin = 31) ## Warning: `origin` is deprecated. Please use `boundary` ## instead. ## Warning: `origin` is deprecated. Please use `boundary` instead. # 그룹화된 데이터로 여러개의 히스토그램 만들기 library(MASS) ## ## Attaching package: &#39;MASS&#39; ## The following object is masked _by_ &#39;.GlobalEnv&#39;: ## ## area ## The following object is masked from &#39;package:dplyr&#39;: ## ## select ggplot(birthwt, aes(x = bwt)) + geom_histogram(fill = &quot;white&quot;, color = &quot;black&quot;) + facet_grid(smoke ~ .) ## `stat_bin()` using `bins = 30`. Pick better value ## with `binwidth`. ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. ggplot(birthwt, aes(x = bwt)) + geom_histogram(fill = &quot;white&quot;, color = &quot;black&quot;) + facet_grid(smoke ~ .) ## `stat_bin()` using `bins = 30`. Pick better value ## with `binwidth`. ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. # 그룹 라벨 정의 birthwt1 &lt;- birthwt birthwt1$smoke &lt;- factor(birthwt1$smoke) levels(birthwt1$smoke) ## [1] &quot;0&quot; &quot;1&quot; ## [1] &quot;0&quot; &quot;1&quot; birthwt$smoke &lt;- revalue(birthwt1$smoke, c(&quot;0&quot; = &quot;Nosmoke&quot;, &quot;1&quot; = &quot;Smoke&quot;)) ggplot(birthwt, aes(x = bwt)) + geom_histogram(fill = &quot;white&quot;, color = &quot;black&quot;) + facet_grid(smoke ~ ., scales = &quot;free&quot;) ## `stat_bin()` using `bins = 30`. Pick better value ## with `binwidth`. ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. ###################################################################################### ## boxplot (geom_boxplot) ###################################################################################### boxplot(len ~ supp, data = ToothGrowth) qplot(ToothGrowth$supp, ToothGrowth$len, geom = &quot;boxplot&quot;) ggplot(ToothGrowth, aes(x = supp, y = len))+ geom_boxplot() # 두 변수의 상호작용을 X축으로 boxplot(len ~ supp + dose, data = ToothGrowth) qplot(interaction(ToothGrowth$supp, ToothGrowth$dose), ToothGrowth$len, geom = &quot;boxplot&quot;) ggplot(ToothGrowth, aes(x = interaction(supp, dose), y = len)) + geom_boxplot() ###################################################################################### ## 함수곡선 그리기 (stat_function) ###################################################################################### # 사용자함수 정의 myfun &lt;- function(xvar){ 1/(1 + exp(-xvar + 10)) } curve(myfun(x), from = 0, to = 20) curve(1-myfun(x), add = TRUE, col = &quot;red&quot;) # qplot(c(0,20), fun = myfun, stat = &quot;function&quot;, geom = &quot;line&quot;) ggplot(data.frame(x = c(0,20)), aes(x =x)) + stat_function(fun = myfun, geom = &quot;line&quot;) # r if (knitr:::is_html_output()) '# Assignments' References "],
["assignments.html", "A Assignments A.1 Assignment 1 A.2 Assignment 2", " A Assignments A.1 Assignment 1 첨부한 concUnitConv-test.R과 유사한 R script를 실행하였을 때, concUnitConv-test.Rout과 유사한 결과나 나오는 concUnitConv.R 파일을 작성하시오. 제출기한: 2017-05-10 18:00 제출방법: R scirpt와 output을 k@acr.kr, shan@acp.kr, sec@acp.kr 로 제출 A.1.1 concUnitConv-test.R source(&quot;D:/G/Desk/R/concUnitConv.R&quot;) concUnitConv() # Wrong input concUnitConv(&quot;kg/L&quot;, &quot;g/L&quot;) # Wrong input concUnitConv(&quot;g/kL&quot;, &quot;g/L&quot;) # Wrong input concUnitConv(&quot;mg/L&quot;, &quot;ug/mL&quot;) Theoph$conc * concUnitConv(&quot;mg/L&quot;, &quot;ug/L&quot;) Theoph$conc * concUnitConv(&quot;mg/L&quot;, &quot;mg/mL&quot;) Theoph$conc * concUnitConv(&quot;mg/L&quot;, &quot;mmol/L&quot;) # Wrong input Theoph$conc * concUnitConv(&quot;mg/L&quot;, &quot;mmol/L&quot;, MW=-100) # Wrong input Theoph$conc * concUnitConv(&quot;mg/L&quot;, &quot;mM&quot;, MW=180.164) # Wrong input Theoph$conc * concUnitConv(&quot;mg/L&quot;, &quot;mmol/L&quot;, MW=180.164) Theoph$mM = Theoph$conc * concUnitConv(&quot;mg/L&quot;, &quot;mmol/L&quot;, MW=180.164) Theoph$mM * concUnitConv(&quot;mmol/L&quot;, &quot;ug/L&quot;, MW=180.164) Theoph$mM * concUnitConv(&quot;mmol/L&quot;, &quot;ug/mL&quot;, MW=180.164) A.1.2 concUnitConv-test.Rout &gt; source(&quot;D:/G/Desk/R/concUnitConv.R&quot;) &gt; &gt; concUnitConv() # Wrong input Error in concUnitConv() : Source concentration unit is not valid. &gt; concUnitConv(&quot;kg/L&quot;, &quot;g/L&quot;) # Wrong input Error in concUnitConv(&quot;kg/L&quot;, &quot;g/L&quot;) : Source amount is not supported. &gt; concUnitConv(&quot;g/kL&quot;, &quot;g/L&quot;) # Wrong input Error in concUnitConv(&quot;g/kL&quot;, &quot;g/L&quot;) : Volume unit is not supported. &gt; &gt; concUnitConv(&quot;mg/L&quot;, &quot;ug/mL&quot;) 1 &gt; Theoph$conc * concUnitConv(&quot;mg/L&quot;, &quot;ug/L&quot;) [1] 740 2840 6570 10500 9660 8580 8360 7470 6890 5940 3280 0 1720 7910 8310 8330 6850 6080 5400 4550 3010 900 0 4400 6900 8200 7800 [28] 7500 6200 5300 4900 3700 1050 0 1890 4600 8600 8380 7540 6880 5780 5330 4190 1150 0 2020 5630 11400 9330 8740 7560 7090 5900 4370 [55] 1570 0 1290 3080 6440 6320 5530 4940 4020 3460 2780 920 150 850 2350 5020 6580 7090 6660 5250 4390 3530 1150 0 3050 3050 7310 [82] 7560 6590 5880 4730 4570 3000 1250 0 7370 9030 7140 6330 5660 5670 4240 4110 3160 1120 240 2890 5220 6410 7830 10210 9180 8020 7140 [109] 5680 2420 0 4860 7240 8000 6810 5870 5220 4450 3620 2690 860 0 1250 3960 7820 9720 9750 8570 6590 6110 4570 1170 &gt; Theoph$conc * concUnitConv(&quot;mg/L&quot;, &quot;mg/mL&quot;) [1] 0.00074 0.00284 0.00657 0.01050 0.00966 0.00858 0.00836 0.00747 0.00689 0.00594 0.00328 0.00000 0.00172 0.00791 0.00831 0.00833 0.00685 0.00608 0.00540 0.00455 [21] 0.00301 0.00090 0.00000 0.00440 0.00690 0.00820 0.00780 0.00750 0.00620 0.00530 0.00490 0.00370 0.00105 0.00000 0.00189 0.00460 0.00860 0.00838 0.00754 0.00688 [41] 0.00578 0.00533 0.00419 0.00115 0.00000 0.00202 0.00563 0.01140 0.00933 0.00874 0.00756 0.00709 0.00590 0.00437 0.00157 0.00000 0.00129 0.00308 0.00644 0.00632 [61] 0.00553 0.00494 0.00402 0.00346 0.00278 0.00092 0.00015 0.00085 0.00235 0.00502 0.00658 0.00709 0.00666 0.00525 0.00439 0.00353 0.00115 0.00000 0.00305 0.00305 [81] 0.00731 0.00756 0.00659 0.00588 0.00473 0.00457 0.00300 0.00125 0.00000 0.00737 0.00903 0.00714 0.00633 0.00566 0.00567 0.00424 0.00411 0.00316 0.00112 0.00024 [101] 0.00289 0.00522 0.00641 0.00783 0.01021 0.00918 0.00802 0.00714 0.00568 0.00242 0.00000 0.00486 0.00724 0.00800 0.00681 0.00587 0.00522 0.00445 0.00362 0.00269 [121] 0.00086 0.00000 0.00125 0.00396 0.00782 0.00972 0.00975 0.00857 0.00659 0.00611 0.00457 0.00117 &gt; Theoph$conc * concUnitConv(&quot;mg/L&quot;, &quot;mmol/L&quot;) # Wrong input Error in concUnitConv(&quot;mg/L&quot;, &quot;mmol/L&quot;) : Positive molecular weight should be given. &gt; Theoph$conc * concUnitConv(&quot;mg/L&quot;, &quot;mmol/L&quot;, MW=-100) # Wrong input Error in concUnitConv(&quot;mg/L&quot;, &quot;mmol/L&quot;, MW = -100) : Positive molecular weight should be given. &gt; Theoph$conc * concUnitConv(&quot;mg/L&quot;, &quot;mM&quot;, MW=180.164) # Wrong input Error in concUnitConv(&quot;mg/L&quot;, &quot;mM&quot;, MW = 180.164) : Target concentration unit is not valid. &gt; Theoph$conc * concUnitConv(&quot;mg/L&quot;, &quot;mmol/L&quot;, MW=180.164) [1] 0.0041073688 0.0157634156 0.0364667747 0.0582802336 0.0536178149 0.0476232766 0.0464021669 0.0414622233 0.0382429342 0.0329699607 0.0182056349 0.0000000000 [13] 0.0095468573 0.0439044426 0.0461246420 0.0462356520 0.0380209143 0.0337470305 0.0299726915 0.0252547679 0.0167070003 0.0049954486 0.0000000000 0.0244221931 [25] 0.0382984392 0.0455140872 0.0432938878 0.0416287383 0.0344130903 0.0294176417 0.0271974423 0.0205368442 0.0058280234 0.0000000000 0.0104904420 0.0255322928 [37] 0.0477342865 0.0465131769 0.0418507582 0.0381874292 0.0320818810 0.0295841567 0.0232565884 0.0063830732 0.0000000000 0.0112120068 0.0312493062 0.0632756822 [49] 0.0517861504 0.0485113563 0.0419617682 0.0393530339 0.0327479408 0.0242556782 0.0087142825 0.0000000000 0.0071601430 0.0170955352 0.0357452099 0.0350791501 [61] 0.0306942563 0.0274194623 0.0223130037 0.0192047246 0.0154303856 0.0051064586 0.0008325748 0.0047179237 0.0130436713 0.0278635021 0.0365222797 0.0393530339 [73] 0.0369663196 0.0291401168 0.0243666881 0.0195932595 0.0063830732 0.0000000000 0.0169290202 0.0169290202 0.0405741436 0.0419617682 0.0365777847 0.0326369308 [85] 0.0262538576 0.0253657778 0.0166514953 0.0069381230 0.0000000000 0.0409071735 0.0501210009 0.0396305588 0.0351346551 0.0314158211 0.0314713261 0.0235341134 [97] 0.0228125486 0.0175395751 0.0062165582 0.0013321196 0.0160409405 0.0289736018 0.0355786950 0.0434604027 0.0566705890 0.0509535756 0.0445149974 0.0396305588 [109] 0.0315268311 0.0134322062 0.0000000000 0.0269754224 0.0401856087 0.0444039875 0.0377988943 0.0325814258 0.0289736018 0.0246997180 0.0200928043 0.0149308408 [121] 0.0047734287 0.0000000000 0.0069381230 0.0219799738 0.0434048978 0.0539508448 0.0541173597 0.0475677716 0.0365777847 0.0339135454 0.0253657778 0.0064940832 &gt; Theoph$mM = Theoph$conc * concUnitConv(&quot;mg/L&quot;, &quot;mmol/L&quot;, MW=180.164) &gt; Theoph$mM * concUnitConv(&quot;mmol/L&quot;, &quot;ug/L&quot;, MW=180.164) [1] 740 2840 6570 10500 9660 8580 8360 7470 6890 5940 3280 0 1720 7910 8310 8330 6850 6080 5400 4550 3010 900 0 4400 6900 8200 7800 [28] 7500 6200 5300 4900 3700 1050 0 1890 4600 8600 8380 7540 6880 5780 5330 4190 1150 0 2020 5630 11400 9330 8740 7560 7090 5900 4370 [55] 1570 0 1290 3080 6440 6320 5530 4940 4020 3460 2780 920 150 850 2350 5020 6580 7090 6660 5250 4390 3530 1150 0 3050 3050 7310 [82] 7560 6590 5880 4730 4570 3000 1250 0 7370 9030 7140 6330 5660 5670 4240 4110 3160 1120 240 2890 5220 6410 7830 10210 9180 8020 7140 [109] 5680 2420 0 4860 7240 8000 6810 5870 5220 4450 3620 2690 860 0 1250 3960 7820 9720 9750 8570 6590 6110 4570 1170 &gt; Theoph$mM * concUnitConv(&quot;mmol/L&quot;, &quot;ug/mL&quot;, MW=180.164) [1] 0.74 2.84 6.57 10.50 9.66 8.58 8.36 7.47 6.89 5.94 3.28 0.00 1.72 7.91 8.31 8.33 6.85 6.08 5.40 4.55 3.01 0.90 0.00 4.40 6.90 8.20 7.80 [28] 7.50 6.20 5.30 4.90 3.70 1.05 0.00 1.89 4.60 8.60 8.38 7.54 6.88 5.78 5.33 4.19 1.15 0.00 2.02 5.63 11.40 9.33 8.74 7.56 7.09 5.90 4.37 [55] 1.57 0.00 1.29 3.08 6.44 6.32 5.53 4.94 4.02 3.46 2.78 0.92 0.15 0.85 2.35 5.02 6.58 7.09 6.66 5.25 4.39 3.53 1.15 0.00 3.05 3.05 7.31 [82] 7.56 6.59 5.88 4.73 4.57 3.00 1.25 0.00 7.37 9.03 7.14 6.33 5.66 5.67 4.24 4.11 3.16 1.12 0.24 2.89 5.22 6.41 7.83 10.21 9.18 8.02 7.14 [109] 5.68 2.42 0.00 4.86 7.24 8.00 6.81 5.87 5.22 4.45 3.62 2.69 0.86 0.00 1.25 3.96 7.82 9.72 9.75 8.57 6.59 6.11 4.57 1.17 &gt; &gt; A.2 Assignment 2 자신이 직접 R package를 만드는 것이 과제 2입니다. 제출기한: 2017-06-21 18:00 제출방법: R package를 shan@acp.kr과 ksbae@acp.kr 메일로 보내십시오. CRAN에 올리면 더 좋습니다. "],
["as-is-r-files.html", "B As-is R Files B.1 Lecture 3 B.2 Lecture 4 B.3 Lecture 5", " B As-is R Files 교수님께서 주신 원본 R 파일 입니다. B.1 Lecture 3 ################################################# ##---------------------------------------------## ## Graphics ## ##---------------------------------------------## ################################################# # 상위수준 그림 함수는 그림을 생성한다. # 하위수준 그림 함수는 기존의 그림에 그림을 추가한다. ## 상위수준 그림 함수의 주요 인자 (arguments) ### # main : 제목 # xlab/ylab : x축 및 y축 레이블 # xlim/ylim : x축 및 y축 범위 # col : 색깔 # lty : 선 모양 # pch : 점 모양 # cex : 그림 성분의 크기 # lwd : 선 굵기 # type : 그림 타입 ################################################# ########## 상위수준 그림 함수 ############ ################################################# WD &lt;- &quot;D:\\\\AMC\\\\Education\\\\UU\\\\2017\\\\R\\\\Graphics\\\\&quot; setwd(WD) dta &lt;- read.csv(&quot;PK.csv&quot;) head(dta) str(dta) ################ scatter plot ################### plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0]) plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], log=&quot;y&quot;) plot(dta$TIME[dta$MDV==0], log(dta$DV[dta$MDV==0])) plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0] , xlab=&quot;Time (hr)&quot;, ylab=&quot;Concentration (ng/mL)&quot; , type=&quot;o&quot;, pch=2, col=1, main=&quot;PK time-course of Drug X&quot; , xlim =c(-2,218), ylim=c(0,80)) plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], axes=F, , xlab=&quot;Time (hr)&quot;, ylab=&quot;Concentration (ng/mL)&quot; , type=&quot;o&quot;, pch=2, col=1, main=&quot;PK time-course of Drug X&quot; , xlim =c(-2,218), ylim=c(0,80)) axis(1, at=seq(0, 218, 24)) axis(2) box() ################## Histogram #################### d.demog &lt;- read.csv(&quot;DEMOG.csv&quot;) # histogram hist(d.demog$HT) hist(d.demog$HT, breaks=10) hist(d.demog$HT, nclass=10) # with density line hist (d.demog$HT, probability=TRUE, breaks=10) lines(density(d.demog$HT)) hist (d.demog$HT, probability=TRUE, breaks=9, xaxt=&quot;n&quot; , main=&quot;Histogram for Height&quot;, xlab=&quot;Height (cm)&quot;, ylab=&quot;Probability (%)&quot;) axis(1, at=seq(min(d.demog$HT), max(d.demog$HT), 3)) lines(density(d.demog$HT)) hist (d.demog$HT, probability=TRUE, breaks=9, xaxt=&quot;n&quot; , main=&quot;Histogram for Height&quot;, xlab=&quot;Height (cm)&quot;, ylab=&quot;Probability (%)&quot; , col = &quot;lightblue&quot;, border = &quot;pink&quot;) axis(1, at=seq(min(d.demog$HT), max(d.demog$HT), 3)) lines(density(d.demog$HT)) ############## Box-Whisker Plot ################# # Box-and-Whisker Plot boxplot(d.demog$WT) boxplot(d.demog$WT ~ d.demog$SEX) boxplot(split(d.demog$WT, d.demog$SEX)) boxplot(WT ~ SEX, data=d.demog) boxplot(d.demog$WT ~ d.demog$SEX , names=c(&quot;Male&quot;,&quot;Female&quot;), ylab=&quot;AGE, year&quot;, ylim=c(min(d.demog$WT)-2, max(d.demog$WT)+2) , col=&quot;pink&quot;) boxplot(d.demog$WT ~ d.demog$SEX , names=c(&quot;Male&quot;,&quot;Female&quot;), ylab=&quot;AGE, year&quot;, ylim=c(min(d.demog$WT)-2, max(d.demog$WT)+2) , col=c(&quot;lightblue&quot;, &quot;salmon&quot;), width=c(0.6, 1)) #varwidth: if varwidth is TRUE, the boxes are drawn with widths proportional #to the square-roots of the number of observations in the groups. boxplot(d.demog$WT ~ d.demog$SEX , names=c(&quot;Male&quot;,&quot;Female&quot;), ylab=&quot;AGE, year&quot;, ylim=c(min(d.demog$WT)-2, max(d.demog$WT)+2) , col=c(&quot;lightblue&quot;, &quot;salmon&quot;) , varwidth=TRUE) ################## Bar Plot ##################### barplot(d.demog$HT) VADeaths barplot(VADeaths, border = &quot;dark blue&quot;) barplot(VADeaths, col = rainbow(20)) barplot(VADeaths, col = heat.colors(8)) barplot(VADeaths, col = gray.colors(4)) barplot(VADeaths, col = gray.colors(4), log=&quot;x&quot;) barplot(VADeaths, col = gray.colors(4), log=&quot;y&quot;) barplot(VADeaths, col = gray.colors(4), log=&quot;xy&quot;) ################## pie chart #################### drug.X.market &lt;- c(0.12, 0.29, 0.32, 0.22, 0.11, 0.28) names(drug.X.market) &lt;- c(&quot;South Korea&quot;,&quot;China&quot;,&quot;USA&quot;,&quot;Japan&quot;,&quot;Austria&quot;,&quot;EU&quot;) pie(drug.X.market) ################ matplot 함수 ################### # matrix와 column 사이의 그림 pct.95 &lt;- read.csv(&quot;pct95.csv&quot;) matplot(pct.95[,1], pct.95[,2:ncol(pct.95)], pch=1) matplot(pct.95[,1], pct.95[,2:ncol(pct.95)], pch=1, col=c(1,2,1), type=&quot;l&quot;, lty=1, lwd=c(1,2,1)) ###### Scatter plot matrices (pairs plots) ###### pairs(d.demog) #add a loess smoother, type: pairs(d.demog, panel = panel.smooth) panel.cor &lt;- function(x, y, digits=2, prefix=&quot;&quot;, cex.cor) { usr &lt;- par(&quot;usr&quot;); on.exit(par(usr)) par(usr = c(0, 1, 0, 1)) r = (cor(x, y)) txt &lt;- format(c(r, 0.123456789), digits=digits)[1] txt &lt;- paste(prefix, txt, sep=&quot;&quot;) if(missing(cex.cor)) cex &lt;- 1.5 text(0.5, 0.5, txt, cex = 1.5) } pairs(d.demog, lower.panel=panel.smooth, upper.panel=panel.cor) ################################################# ## 하위수준 그림 함수 ## ################################################# # points : 점추가 # lines : 선 추가 # abline : 기준선 추가 # mtext : 텍스트 추가 # legend : 설명(legend) 추가 # polygon : polygon 추가 ############ 점, 선, 설명 추가 하기 ############# plot(pct.95$TIME, pct.95$PCT50, main=&quot;PK of Drug X&quot; , type=&quot;l&quot;, xlab=&quot;Time (h)&quot;, ylab=&quot;Concentration (ng/ml)&quot; , ylim=range(0,80), lty=1, col=&quot;red&quot;, lwd=2) plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], main=&quot;PK of Drug X&quot; , type=&quot;n&quot;, xlab=&quot;Time (h)&quot;, ylab=&quot;Concentration (ng/ml)&quot; , ylim=range(0,80)) points(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], pch = 16, cex=0.8) lines(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], col=&quot;black&quot;, lwd=1) abline(40, 0, col=&quot;red&quot;, lty=2) #abline(a,b): y=a+b*x legend(&quot;topright&quot;, legend=c(&quot;Individual concentrations&quot;) , lty=1, col=&quot;black&quot;) ################# polygon 함수 ################### plot(c(1, 10), c(1, 6), type = &quot;n&quot;) polygon(c(2,8,8,2), c(5,4,3,2), col=&quot;lightgreen&quot;) plot(c(1, 9), 1:2, type = &quot;n&quot;) polygon(1:9, c(2,1,2,1,1,2,1,2,1), col = c(&quot;red&quot;, &quot;blue&quot;), border = c(&quot;green&quot;, &quot;yellow&quot;), lwd = 3, lty = c(&quot;dashed&quot;, &quot;solid&quot;)) ################# 그림 출력하기 ################## #--pdf graphics devices pdf(&quot;PK_of_Drug_X.pdf&quot;) plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], main=&quot;PK of Drug X&quot; , type=&quot;n&quot;, xlab=&quot;Time (h)&quot;, ylab=&quot;Concentration (ng/ml)&quot; , ylim=range(0,80)) points(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], pch = 16, cex=0.8) lines(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], col=&quot;black&quot;, lwd=1) abline(40, 0, col=&quot;red&quot;, lty=2) #abline(a,b): y=a+b*x legend(&quot;topright&quot;, legend=c(&quot;Individual concentrations&quot;) , lty=1, col=&quot;black&quot;) dev.off() #--PNG graphics devices png(&quot;PK_of_Drug_X.png&quot;) plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], main=&quot;PK of Drug X&quot; , type=&quot;n&quot;, xlab=&quot;Time (h)&quot;, ylab=&quot;Concentration (ng/ml)&quot; , ylim=range(0,80)) points(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], pch = 16, cex=0.8) lines(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], col=&quot;black&quot;, lwd=1) abline(40, 0, col=&quot;red&quot;, lty=2) #abline(a,b): y=a+b*x legend(&quot;topright&quot;, legend=c(&quot;Individual concentrations&quot;) , lty=1, col=&quot;black&quot;) dev.off() #--Windows graphics devices win.metafile(&quot;PK_of_Drug_X.wmf&quot;) plot(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], main=&quot;PK of Drug X&quot; , type=&quot;n&quot;, xlab=&quot;Time (h)&quot;, ylab=&quot;Concentration (ng/ml)&quot; , ylim=range(0,80)) points(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], pch = 16, cex=0.8) lines(dta$TIME[dta$MDV==0], dta$DV[dta$MDV==0], col=&quot;black&quot;, lwd=1) abline(40, 0, col=&quot;red&quot;, lty=2) #abline(a,b): y=a+b*x legend(&quot;topright&quot;, legend=c(&quot;Individual concentrations&quot;) , lty=1, col=&quot;black&quot;) dev.off() B.2 Lecture 4 # 2017-03-29 setwd(&quot;D:/Rt&quot;) dir() mydata = read.csv(&quot;MyData2017.csv&quot;, as.is=TRUE) Theoph library(lattice) # trellis xyplot(conc ~ Time | Subject, data=Theoph) xyplot(conc ~ Time | Subject, data=Theoph, type=&quot;b&quot;) Theoph[,&quot;ID&quot;] = as.numeric(as.character(Theoph[,&quot;Subject&quot;])) xyplot(conc ~ Time | ID, data=Theoph, type=&quot;b&quot;) xyplot(conc ~ Time | as.factor(ID), data=Theoph, type=&quot;b&quot;) write.csv(Theoph, &quot;Theoph.csv&quot;, row.names=FALSE, quote=FALSE, na=&quot;&quot;) IDs = sort(unique(Theoph[,&quot;ID&quot;])) ; IDs nID = length(IDs) ; nID demog = unique(Theoph[,c(&quot;ID&quot;,&quot;Wt&quot;)]) colnames(demog) = c(&quot;ID&quot;, &quot;BWT&quot;) write.csv(demog, &quot;1-demog.csv&quot;, row.names=FALSE, quote=FALSE, na=&quot;&quot;) DV = Theoph[,c(&quot;ID&quot;,&quot;Time&quot;, &quot;conc&quot;)] colnames(DV) = c(&quot;ID&quot;, &quot;TIME&quot;, &quot;DV&quot;) write.csv(DV, &quot;3-DV.csv&quot;, row.names=FALSE, quote=FALSE, na=&quot;&quot;) adm = cbind(IDs, rep(0, nID), rep(320, nID)) colnames(adm) = c(&quot;ID&quot;, &quot;TIME&quot;, &quot;AMT&quot;) write.csv(adm, &quot;2-adm.csv&quot;, row.names=FALSE, quote=FALSE, na=&quot;&quot;) demog = read.csv(&quot;1-demog.csv&quot;, as.is=TRUE) adm = read.csv(&quot;2-adm.csv&quot;, as.is=TRUE) dv = read.csv(&quot;3-dv.csv&quot;, as.is=TRUE) AdmDv = merge(adm, dv, by=intersect(colnames(adm), colnames(dv)), all=TRUE) DataAll = merge(demog, AdmDv, by=c(&quot;ID&quot;), all=TRUE) B.3 Lecture 5 # 2017-04-05 R-intro.pdf Chapter 08 pois # ?dbeta dnorm(0) pnorm(0) 1 - pnorm(1.96) # ?pnorm pnorm(1.96, lower.tail=FALSE) qnorm(0.5) qnorm(0.975) format(qnorm(0.975), digits=22) rnorm(5) rnorm(5, 10, 1) x = rnorm(100, 10, 1) mean(x) sd(x) 2*pt(-2.43, df = 13) 2*pt(-2.43, df = 1000) qnorm(0.995) qf(0.01, 2, 7, lower.tail = FALSE) # ?fivenum faithful str(faithful) eruptions attach(faithful) eruptions waiting stem(waiting) sort(eruptions) hist(eruptions) hist(eruptions, seq(1.6, 5.2, 0.2), prob=TRUE) lines(density(eruptions, bw=0.1)) rug(eruptions) # ?hist # ?density lines(density(eruptions, bw=&quot;SJ&quot;), lty=3) plot(ecdf(eruptions), do.points=FALSE, verticals=TRUE) # ?plot ecdf(eruptions) x = ecdf(eruptions) x str(x) x() plot(ecdf(eruptions), do.points=FALSE) plot(ecdf(eruptions)) long &lt;- eruptions[eruptions &gt; 3] x &lt;- seq(3, 5.4, 0.01) pnorm(x, mean=mean(long), sd=sqrt(var(long))) # ?par x &lt;- rt(250, df = 5) qqnorm(x); qqline(x) curve(dnorm, -5, 5) y = density(x) lines(y, lty=3) # ?ppoints ppoints(250) ppoints(10) qqplot(qt(ppoints(250), df = 5), x, xlab = &quot;Q-Q plot for t dsn&quot;) windows() qqplot(qt(runif(250), df = 5), x, xlab = &quot;Q-Q plot for t dsn&quot;) # ?shapiro.test # ?ks.test # ?t.test A = c(79.98, 80.04, 80.02, 80.04, 80.03, 80.03, 80.04, 79.97, 80.05, 80.03, 80.02, 80.00, 80.02) B = c(80.02, 79.94, 79.98, 79.97, 79.97, 80.03, 79.95, 79.97) boxplot(A, B) t.test(A, B) var.test(A, B) t.test(A, B, var.equal=TRUE) wilcox.test(A, B) plot(ecdf(A), do.points=FALSE, verticals=TRUE, xlim=range(A, B)) plot(ecdf(B), do.points=FALSE, verticals=TRUE, add=TRUE) ks.test(A, B) # Chapter 9 Grouping, loops and conditional execution # { } does grouping # Usefulness of loops: for &gt;&gt; while &gt;&gt; repeat for (i in 1:10) { print(2*i) } for (i in 1:10) print(2*i) #while ( ) { ## Statements #} # # if ~ else ~ # if ( ) { # # Statements 1 # } else { # # Statements 2 # } # # if ( ) # Statement1 # else # Statement2 # # if ( ) { # # Statements 1 # } else if ( ) { # # Statements 2 # } else if ( ) { # # Statements 3 # } else { # # Statements 4 # } # # # Chapter 10 Writing your own functions Square = function(x=0) { return(x*x) } twosam = function(y1, y2) { n1 = length(y1) n2 = length(y2) yb1 = mean(y1) yb2 = mean(y2) s1 = var(y1) s2 = var(y2) s = ((n1 - 1)*s1 + (n2 - 1)*s2)/(n1 + n2 - 2) tst = (yb1 - yb2)/sqrt(s*(1/n1 + 1/n2)) return (tst) } x = rnorm(10) y = rt(10, 5) twosam(x, y) T.test = function(y1, y2) { n1 = length(y1) n2 = length(y2) yb1 = mean(y1) yb2 = mean(y2) s1 = var(y1) s2 = var(y2) s = ((n1 - 1)*s1 + (n2 - 1)*s2)/(n1 + n2 - 2) tst = (yb1 - yb2)/sqrt(s*(1/n1 + 1/n2)) DF = n1 + n2 - 2 p.val = 2*(1 - pt(abs(tst), df=DF)) Res = list(tst, DF, p.val, yb1, yb2) names(Res) = c(&quot;t&quot;, &quot;df&quot;, &quot;p-value&quot;, &quot;mean of x&quot;, &quot;mean of y&quot;) return (Res) } res = T.test(x, y) t.test(x, y) bslash = function(X, y) { X = qr(X) return (qr.coef(X, y)) } regcoeff = bslash(Xmat, yvar) &quot;%^%&quot; = function(S, pow) with(eigen(S), vectors %*% (abs(values)^pow * t(vectors))) M = matrix(c(2,1,1,2), nrow=2) ; M M %^% 0.5 sqrtM = M%^%0.5 ; sqrtM sqrtM %*% sqrtM area = function(f, a, b, eps=1.0e-06, lim=10) { fun1 = function(f, a, b, fa, fb, a0, eps, lim, fun) { ## function &#39;fun1’is only visible inside &#39;area’ d = (a + b)/2 h = (b - a)/4 fd = f(d) a1 = h * (fa + fd) a2 = h * (fd + fb) if (abs(a0 - a1 - a2) &lt; eps || lim == 0) return (a1 + a2) else { return (fun(f, a, d, fa, fd, a1, eps, lim - 1, fun) + fun(f, d, b, fd, fb, a2, eps, lim - 1, fun)) } } fa = f(a) fb = f(b) a0 = ((fa + fb) * (b - a))/2 fun1(f, a, b, fa, fb, a0, eps, lim, fun1) } area(dnorm, 0, 1) integrate(dnorm, 0, 1) pnorm(1) - pnorm(0) f = function(x) { y = 2*x print(x) print(y) print(z) } f(1) z = 3 f(1) cube = function(n) { sq = function() n*n n*sq() } cube(5) open.account = function(total) { list( deposit = function(amount) { if(amount &lt;= 0) stop(&quot;Deposits must be positive!\\n&quot;) total &lt;&lt;- total + amount cat(amount, &quot;deposited. Your balance is&quot;, total, &quot;\\n\\n&quot;) }, withdraw = function(amount) { if(amount &gt; total) stop(&quot;You don’t have that much money!\\n&quot;) total &lt;&lt;- total - amount cat(amount, &quot;withdrawn. Your balance is&quot;, total, &quot;\\n\\n&quot;) }, balance = function() { cat(&quot;Your balance is&quot;, total, &quot;\\n\\n&quot;) } ) } ross = open.account(100) robert = open.account(200) ross$balance() robert$balance() ross$deposit(50) ross$balance() ross$withdraw(500) # More basic keywords and functions 1 %in% c(1,2,3,4) 5 %in% c(1,2,3,4) is.finite(Inf) prod(1:3) cummax(1:10) cummax(10:1) # ?xor x = 11:20 x which(x==3) which(x==13) length(x) y = &quot;my string&quot; length(y) nchar(y) strsplit(y, &quot; &quot;) strsplit(y, &quot; &quot;)[[1]] substr(y, 4, 5) sample(1:10) sample(1:10, 20) sample(1:10, 20, replace=TRUE) sample(rep(1:10,2)) "],
["r-tips.html", "C R Tips C.1 Using Coursera", " C R Tips Handbook of statistical distributions with applications (Krishnamoorthy 2006) Materials https://cran.r-project.org/manuals.html https://cran.r-project.org/doc/manuals/r-release/R-intro.pdf Changing defualt R console size and etc : 배균섭 교수님께서 알려주신 tip을 참고하여 video clip을 만들었습니다. 매일같이 마주하게 되는 R console이 너무 작게 느껴지셨다면 다음의 동영상을 참고하셔서 초기 세팅 (Rconsole 파일)을 바꿔서 해결할 수 있습니다. https://youtu.be/uSunEN8W5Mo C.1 Using Coursera PAGK에 보낸 이메일을 그대로 옮겼습니다. 배균섭 교수님의 추천을 받아 다음과 같은 강의와 책을 공유하고자 합니다. Coursera.com 에 유익한 R 강좌가 열렸습니다. “Mastering Software Development in R Specialization”이란 제목의 강좌인데 4개 Course를 무료로 들을 수 있게 되어있습니다. https://www.coursera.org/specializations/r 이것이 본래의 Link인데 여기서 각각의 Course를 찾거나 혹은 아래의 링크를 각각 클릭하여 하단에 나오는 “Audit”을 클릭하면 무료로 들을 수 있습니다. Audit 버튼이 안보이신다고 하신 분들이 몇분 계셔서 첨언합니다. Coursera 회원가입하시고 로그인 한 뒤, Enroll Now를 누르시면 Audit 혹은 청강하기 라디오버튼을 보실 수 있습니다. 앱에서도 마찬가지입니다. 이외에도 코세라에는 많은 유익한 강의가 있는 것 같습니다. 다만 코스(Course)의 묶음인 “Specialization” 에서는 유료등록(Enroll) 밖에 없으므로 Certificate가 필요하지 않다면, 각각의 코스를 구글검색 혹은 코세라 내에서 검색해서 “Audit(청강)” 하시면 무료로 강의를 들을 수 있습니다. https://www.coursera.org/learn/r-programming-environment https://www.coursera.org/learn/advanced-r https://www.coursera.org/learn/r-packages https://www.coursera.org/learn/r-data-visualization https://bookdown.org/rdpeng/RProgDA/ 이 링크는 무료로 공개된 강의 책자입니다. 강의를 듣지 않고 책으로 보고 싶으신 분은 참고하시면 됩니다. References "],
["acknowledgement.html", "D Acknowledgement", " D Acknowledgement 이 웹북을 만드는데 도움을 주신 분들은 다음과 같습니다. Dr. Jekyll Hyde "],
["references.html", "References D.1 Introduction D.2 List of Submitted R Packages D.3 Feedback D.4 References", " References D.1 Introduction 한학기 동안 고생 많으셨습니다. 두번째 과제의 제출 현황을 정리하였습니다. 성공적으로 설치된 R Packages의 목록이 나와있습니다. D.1.1 목록 생성 방법 DESCRIPTION 파일 정보를 읽어 인용을 위한 bibtex파일을 생성해 주는 knitr::write_bib() (Xie 2017b)와 RefManageR::ReadBib() (???) 함수를 사용하여 나타내었습니다. D.2 List of Submitted R Packages An alphabetical order by the last name as of 2017-12-20 09:26:46 ## Error in do_read_bib(file, encoding = .Encoding, srcfile): unable to open file to read Received packages: IOLcalculator, hw, TempConvert D.3 Feedback R 프로그래밍에서 어려운 한 단계를 넘어선 것을 축하드립니다. 제출하셨으나 목록에 자신의 패키지가 보이지 않는 분은 2017-06-21 18:00 이후 shan@acp.kr 로 알려주세요. D.3.1 팁 목록의 개발자 이름, 패키지 이름/설명/버젼 등은 DESCRIPTION 파일 혹은 package.Rd 파일에 에 적힌 것을 그대로 읽어온 것입니다. 다른 사람들이 여러분의 패키지를 사용하게 되거나 인용하게 될 때 표시되는 (사람으로 비유하면 얼굴과 같은) 정보이므로 신중하게 정하는 것이 좋습니다. 패키지 title은 title (proper) case로 작성되어야 합니다. tools::toTitleCase() 함수를 사용해도 됩니다. # Conversion to the title (proper) case tools::toTitleCase(&quot;This package title should be corrected&quot;) ## [1] &quot;This Package Title Should be Corrected&quot; 패키지를 CRAN 혹은 Github나 Bitbucket 등에 올린다면 다른 사람들이 쉽게 업데이트 할 수 있으므로 코드를 다른 사람과 공유 시 여러 장점을 갖게 됩니다. D.3.2 Suggested Reading Materials 무료로 볼 수 있는 html 자료입니다. R packages : R 패키지를 만드는 방법에 대해 쉽게 설명되어 있습니다. Writing an R package from scratch : 블로그 포스트로서 아주 단순한 패키지를 만드는데 참고하시면 됩니다. R package primer : 비교적 쉽게 서술되어 있습니다. D.4 References "]
]
